{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\SuperAdministrador\\\\componentes\\\\general\\\\RecuperarContrasena.js\";\nimport React from 'react';\nimport '../../css/menu.css';\nimport '../../css/registro.css';\nimport Button from '@material-ui/core/Button';\nimport { reduxForm, Field } from 'redux-form';\nimport Alert from '@material-ui/lab/Alert';\nimport { generarInputLogin } from '../../utilitario/GenerarInputs.js';\nimport { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena } from '../../actions/actionsUsuario.js';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport imagenDefecto from '../../imagenes/defectoLogin.png';\nimport { withRouter } from 'react-router-dom';\nimport RenderPasword from '../../utilitario/GenerarInputs';\nimport { requerido, contrasena } from '../../utilitario/validacionCampos.js';\n\nclass Recuperar extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      habilitado: false,\n      recuperar: false,\n      severidad: 'info'\n    };\n\n    this.handleSubmitForm = values => {\n      if (values.nuevaContrasena !== values.verificacionNueva) {\n        this.props.actualizarMensajeRecuperarContrasena('Las contraseñas no coinciden');\n        this.setState({\n          severidad: 'warning'\n        });\n      } else {\n        debugger;\n        this.props.actionCambiarContrasenaExterna(this.props.correo, values.nuevaContrasena, this.props.match.params.token);\n      }\n    };\n\n    this.onClicKIniciar = event => {\n      event.preventDefault();\n      this.props.history.push('/');\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.token === undefined | this.props.match.params.token.length < 130) {\n      this.props.history.push('/');\n    } else {\n      this.props.actionValidarToken(this.props.match.params.token);\n    }\n  }\n\n  componentDidUpdate() {\n    switch (this.props.mensaje) {\n      case 'Correcto':\n        if (!this.state.recuperar) {\n          this.setState({\n            recuperar: true\n          });\n        }\n\n        this.props.actualizarMensajeRecuperarContrasena('');\n        break;\n\n      case 'Contraseña actualizada':\n        if (this.state.severidad !== 'success') {\n          this.setState({\n            severidad: 'success'\n          });\n        }\n\n        break;\n\n      case 'No se encontro un correo asociado':\n        if (this.state.severidad !== 'error') {\n          this.setState({\n            severidad: 'error'\n          });\n        }\n\n        break;\n\n      case 'Se vencio el plazo de 24h genere una nueva solicitud':\n        if (this.state.severidad !== 'warning') {\n          this.setState({\n            severidad: 'warning'\n          });\n        }\n\n        break;\n\n      case 'Ocurrio un problema con la solicitud intentelo de nuevo':\n        if (this.state.severidad !== 'error') {\n          this.setState({\n            severidad: 'error'\n          });\n        }\n\n        break;\n\n      case 'El usuario no esta registrado':\n        if (this.state.severidad !== 'error') {\n          this.setState({\n            severidad: 'error'\n          });\n        }\n\n        break;\n\n      case 'Ocurrio un error en el servidor':\n        if (this.state.severidad !== 'error') {\n          this.setState({\n            severidad: 'error'\n          });\n        }\n\n        break;\n\n      case 'Servidor fuera de servicio temporalmente':\n        if (this.state.severidad !== 'error') {\n          this.setState({\n            severidad: 'error'\n          });\n        }\n\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        background: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row no-gutter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login d-flex align-items-center py-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 col-lg-10 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, this.state.recuperar ? React.createElement(React.Fragment, null, React.createElement(Modal, {\n      isOpen: true,\n      toggle: this.toggle,\n      className: this.props.className,\n      style: {\n        maxWidth: '400px',\n        width: '50%',\n        margin: '10px auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 108\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"Cambiar contrase\\xF1a\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.handleSubmitForm),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"nuevaContrasena\",\n      component: RenderPasword,\n      validate: [requerido, contrasena],\n      label: \"Nueva contrase\\xF1a\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }), React.createElement(Field, {\n      name: \"verificacionNueva\",\n      component: RenderPasword,\n      validate: [requerido, contrasena],\n      label: \"Confirmar nueva contrase\\xF1a\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"mensaje\",\n      component: generarMensaje,\n      type: this.state.severidad,\n      label: this.props.mensaje,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      style: {\n        paddingLeft: \"29px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: 'gray',\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      onClick: this.onClicKIniciar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Iniciar sesion\")), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: '#0E3D38',\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, \"Cambiar contrase\\xF1a\"), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 143\n      },\n      __self: this\n    }))))))) : React.createElement(React.Fragment, null, React.createElement(Modal, {\n      isOpen: true,\n      toggle: this.toggle,\n      className: this.props.className,\n      size: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 157\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"mensaje\",\n      type: this.state.severidad,\n      component: generarMensaje,\n      label: this.props.mensaje,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 158\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 162\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      style: {\n        paddingLeft: \"29px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 163\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: '#0E3D38',\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      onClick: this.onClicKIniciar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164\n      },\n      __self: this\n    }, \"Aceptar\"))))))))))))));\n  }\n\n}\n\nconst generarMensaje = ({\n  input,\n  label,\n  type,\n  meta: {\n    touched,\n    error,\n    warning\n  }\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 194\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 195\n  },\n  __self: this\n}, label === undefined | label === '' ? React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 196\n  },\n  __self: this\n}) : React.createElement(Alert, {\n  draggable: true,\n  severity: type,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 196\n  },\n  __self: this\n}, label)));\n\nfunction mapStateToProps(state) {\n  return {\n    mensaje: state.user.mensajeContrasenaExterna,\n    correo: state.user.nombreUsuario\n  };\n}\n\nlet formulario = reduxForm({\n  form: 'recuperarContrasena'\n})(Recuperar);\nexport default withRouter(connect(mapStateToProps, {\n  actionValidarToken,\n  actionCambiarContrasenaExterna,\n  actualizarMensajeRecuperarContrasena\n})(formulario));","map":{"version":3,"sources":["C:/Users/jeiso/Desktop/proyectosESCOM/frontend/ESCOM-view/src/SuperAdministrador/componentes/general/RecuperarContrasena.js"],"names":["React","Button","reduxForm","Field","Alert","generarInputLogin","actionValidarToken","actionCambiarContrasenaExterna","actualizarMensajeRecuperarContrasena","Modal","ModalHeader","ModalBody","ModalFooter","connect","imagenDefecto","withRouter","RenderPasword","requerido","contrasena","Recuperar","Component","state","habilitado","recuperar","severidad","handleSubmitForm","values","nuevaContrasena","verificacionNueva","props","setState","correo","match","params","token","onClicKIniciar","event","preventDefault","history","push","componentDidMount","undefined","length","componentDidUpdate","mensaje","render","background","toggle","className","maxWidth","width","margin","handleSubmit","generarMensaje","paddingLeft","fontSize","fontFamily","textTransform","input","label","type","meta","touched","error","warning","mapStateToProps","user","mensajeContrasenaExterna","nombreUsuario","formulario","form"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport '../../css/menu.css'\r\nimport '../../css/registro.css'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { generarInputLogin } from '../../utilitario/GenerarInputs.js';\r\nimport { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena } from '../../actions/actionsUsuario.js'\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport imagenDefecto from '../../imagenes/defectoLogin.png';\r\nimport { withRouter } from 'react-router-dom';\r\nimport RenderPasword from '../../utilitario/GenerarInputs';\r\nimport { requerido, contrasena } from '../../utilitario/validacionCampos.js';\r\n\r\nclass Recuperar extends React.Component {\r\n\r\n    state = {\r\n        habilitado: false,\r\n        recuperar: false,\r\n        severidad: 'info'\r\n    }\r\n    componentDidMount() {\r\n        if (this.props.match.params.token === undefined | this.props.match.params.token.length < 130) {\r\n            this.props.history.push('/');\r\n        } else {\r\n            this.props.actionValidarToken(this.props.match.params.token);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        switch (this.props.mensaje) {\r\n            case 'Correcto':\r\n                if (!this.state.recuperar) { this.setState({ recuperar: true }) }\r\n                this.props.actualizarMensajeRecuperarContrasena('');\r\n                break;\r\n            case 'Contraseña actualizada':\r\n                if(this.state.severidad!=='success'){\r\n                    this.setState({ severidad: 'success' });\r\n                }\r\n                break;\r\n            case 'No se encontro un correo asociado':\r\n                if(this.state.severidad!=='error'){\r\n                    this.setState({ severidad: 'error' });\r\n                }\r\n                break;\r\n            case 'Se vencio el plazo de 24h genere una nueva solicitud':\r\n                if(this.state.severidad!=='warning'){\r\n                    this.setState({ severidad: 'warning' });\r\n                }\r\n                break;\r\n            case 'Ocurrio un problema con la solicitud intentelo de nuevo':\r\n                if(this.state.severidad!=='error'){\r\n                    this.setState({ severidad: 'error' });\r\n                }\r\n                break;\r\n            case 'El usuario no esta registrado':\r\n                if(this.state.severidad!=='error'){\r\n                    this.setState({ severidad: 'error' });\r\n                }\r\n                break;\r\n            case 'Ocurrio un error en el servidor':\r\n                if(this.state.severidad!=='error'){\r\n                    this.setState({ severidad: 'error' });\r\n                }\r\n                break;\r\n            case 'Servidor fuera de servicio temporalmente':\r\n                if(this.state.severidad!=='error'){\r\n                    this.setState({ severidad: 'error' });\r\n                }\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleSubmitForm = values => {\r\n        if (values.nuevaContrasena !== values.verificacionNueva) {\r\n            this.props.actualizarMensajeRecuperarContrasena('Las contraseñas no coinciden');\r\n            this.setState({ severidad: 'warning' });\r\n        } else {\r\n            debugger;\r\n            this.props.actionCambiarContrasenaExterna(this.props.correo, values.nuevaContrasena, this.props.match.params.token);\r\n        }\r\n    }\r\n\r\n    onClicKIniciar = event => {\r\n        event.preventDefault();\r\n        this.props.history.push('/');\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container-fluid\" style={{ background: \"white\" }}>\r\n                    <div className=\"row no-gutter\">\r\n\r\n                        <div className=\"col-md-8 col-lg-6\">\r\n                            <div className=\"login d-flex align-items-center py-5\">\r\n                                <div className=\"container\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-6 col-lg-10 mx-auto\">\r\n                                            {this.state.recuperar ?\r\n                                                <>\r\n                                                    <Modal isOpen={true}\r\n                                                        toggle={this.toggle}\r\n                                                        className={this.props.className}\r\n                                                        style={{ maxWidth: '400px', width: '50%', margin: '10px auto' }}\r\n                                                    >\r\n                                                        <ModalHeader toggle={this.toggle} className=\"center\">Cambiar contraseña</ModalHeader>\r\n                                                        <ModalBody>\r\n                                                            <form onSubmit={this.props.handleSubmit(this.handleSubmitForm)}>\r\n                                                                <Field name=\"nuevaContrasena\" component={RenderPasword} validate={[requerido, contrasena]} label=\"Nueva contraseña\" />\r\n                                                                <Field name=\"verificacionNueva\" component={RenderPasword} validate={[requerido, contrasena]} label=\"Confirmar nueva contraseña\" />\r\n                                                                <div className=\"row\">\r\n                                                                    <div className=\"col-sm-12\">\r\n                                                                        <Field name=\"mensaje\" component={generarMensaje} type={this.state.severidad} label={this.props.mensaje} />\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                                <br />\r\n                                                                <div className=\"row\">\r\n                                                                    <div className=\"col-sm-6\" style={{ paddingLeft: \"29px\" }}>\r\n                                                                        <Button\r\n                                                                            style={{ background: 'gray', fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                                            className=\"btn btn-dark\"\r\n                                                                            variant=\"contained\"\r\n                                                                            onClick={this.onClicKIniciar}\r\n                                                                        >\r\n                                                                            Iniciar sesion\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                    </Button>\r\n                                                                    </div>\r\n                                                                    <div className=\"col-sm-6\">\r\n                                                                        <Button\r\n                                                                            style={{ background: '#0E3D38', fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                                            className=\"btn btn-dark\"\r\n                                                                            variant=\"contained\"\r\n                                                                            type=\"submit\">\r\n                                                                            Cambiar contraseña\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t             </Button>\r\n                                                                        <br />\r\n                                                                    </div>\r\n                                                                </div>\r\n                                                            </form>\r\n                                                        </ModalBody>\r\n                                                    </Modal>\r\n                                                </> :\r\n                                                <>\r\n                                                    <Modal isOpen={true}\r\n                                                        toggle={this.toggle}\r\n                                                        className={this.props.className}\r\n                                                        size=\"col-md-6\">\r\n                                                        <ModalBody>\r\n                                                            <div className=\"row\">\r\n                                                                <div className=\"col-sm-12 center\">\r\n                                                                    <Field name=\"mensaje\" type={this.state.severidad} component={generarMensaje} label={this.props.mensaje} />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <br />\r\n                                                            <div className=\"row\">\r\n                                                                <div className=\"col-sm-6\" style={{ paddingLeft: \"29px\" }}>\r\n                                                                    <Button\r\n                                                                        style={{ background: '#0E3D38', fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                                        className=\"btn btn-dark\"\r\n                                                                        variant=\"contained\"\r\n                                                                        onClick={this.onClicKIniciar}\r\n                                                                    >\r\n                                                                        Aceptar\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                    </Button>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </ModalBody>\r\n                                                    </Modal>\r\n\r\n                                                </>\r\n\r\n                                            }\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst generarMensaje = ({ input, label, type, meta: { touched, error, warning } }) => (\r\n    <div>\r\n        <div>\r\n            {label === undefined | label === '' ? <div></div> : <Alert draggable={true} severity={type}>{label}</Alert>}\r\n        </div>\r\n    </div>\r\n)\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        mensaje: state.user.mensajeContrasenaExterna,\r\n        correo: state.user.nombreUsuario\r\n    }\r\n}\r\n\r\nlet formulario = reduxForm({\r\n    form: 'recuperarContrasena'\r\n})(Recuperar)\r\n\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena })(formulario));\r\n"]},"metadata":{},"sourceType":"module"}