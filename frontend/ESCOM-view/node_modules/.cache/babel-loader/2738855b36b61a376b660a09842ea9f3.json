{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\hashy\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\ModuloDocumental\\\\components\\\\Leader\\\\Documentation\\\\AnnexSearch\\\\addVersion.js\";\nimport React from 'react';\nimport { Component } from 'react';\nimport { connect } from 'react-redux';\nimport { addAnnex } from '../../../../redux/actions/annexA.js';\nimport { reduxForm, Field } from 'redux-form';\nimport { withRouter } from 'react-router-dom';\nimport { required } from '../../../utilitarian/validations.js';\nimport { ToastContainer, toast } from 'react-toastify';\nimport { getAnnexVersions, addAnnexVersion } from '../../../../redux/actions/annexVersionA.js';\n\nclass AddVersion extends Component {\n  componentWillMount() {\n    this.props.getAnnexVersions(sessionStorage.getItem('annex'));\n  }\n\n  constructor(props) {\n    super(props);\n\n    this.checkMimeType = event => {\n      let files = event.target.files;\n      let exte = files[0].name.split('.').pop();\n\n      if (exte !== 'docx' && exte !== 'pdf') {\n        toast.error(exte + ' is not a supported format\\n');\n        event.target.value = null;\n        return false;\n      }\n\n      return true;\n    };\n\n    this.maxSelectFile = event => {\n      let files = event.target.files;\n\n      if (files.length > 1) {\n        const msg = 'Only 1 images can be uploaded at a time';\n        event.target.value = null;\n        toast.warn(msg);\n        return false;\n      }\n\n      return true;\n    };\n\n    this.checkFileSize = event => {\n      let files = event.target.files;\n      let size = 50000000;\n\n      if (files[0].size > size) {\n        toast.error('is too large, please pick a smaller file\\n');\n        event.target.value = null;\n        return false;\n      }\n\n      return true;\n    };\n\n    this.onChangeHandler = event => {\n      var files = event.target.files;\n\n      if (this.maxSelectFile(event) && this.checkMimeType(event) && this.checkFileSize(event)) {\n        // if return true allow to setState\n        this.setState({\n          selectedFile: files,\n          loaded: 0\n        });\n      }\n    };\n\n    this.handleAdd = formValue => {\n      let annexN = {\n        id: 0,\n        date: new Date(),\n        location: '',\n        description: formValue.descriptionA,\n        state: 1,\n        version: 0,\n        annex: sessionStorage.getItem('annex'),\n        idUser: 1,\n        requestData: null\n      };\n      const data = new FormData();\n      data.append('file', this.state.selectedFile[0]);\n      this.props.addAnnexVersion(data, annexN);\n      this.props.showAnnexVersions(sessionStorage.getItem('annex'));\n    };\n\n    this.state = {\n      selectedFile: null,\n      loaded: 0\n    };\n  }\n\n  randomInt(min, max) {\n    return min + Math.floor((max - min) * Math.random());\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(ToastContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      type: \"button\",\n      className: \"btn text-light btn-sm float-right naranja \",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#addModal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"i\", {\n      class: \"fas fa-plus\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }), \" Agregar\"), React.createElement(\"div\", {\n      class: \"modal fade\",\n      id: \"addModal\",\n      tabindex: \"-1\",\n      role: \"dialog\",\n      \"aria-labelledby\": \"exampleModalLabel\",\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"modal-dialog\",\n      role: \"document\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"modal-content\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      name: \"agregar\",\n      className: \"form-horizontal\",\n      onSubmit: this.props.handleSubmit(this.handleAdd),\n      id: \"hola\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      class: \"modal-header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"h5\", {\n      class: \"modal-title\",\n      id: \"exampleModalLabel\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105\n      },\n      __self: this\n    }, \"Agregar Annexo\"), React.createElement(\"button\", {\n      type: \"button\",\n      class: \"close\",\n      \"data-dismiss\": \"modal\",\n      \"aria-label\": \"Close\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106\n      },\n      __self: this\n    }, React.createElement(\"span\", {\n      \"aria-hidden\": \"true\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, \"\\xD7\"))), React.createElement(\"div\", {\n      class: \"modal-body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110\n      },\n      __self: this\n    }, React.createElement(\"label\", {\n      for: \"form_control_1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112\n      },\n      __self: this\n    }, \"Descripcion: \"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"descriptionA\",\n      validate: [required],\n      component: generarInput,\n      label: \"Descripcion\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      for: \"form_control_1\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, \"Documento: \"), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-10\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      type: \"file\",\n      class: \"form-control\",\n      multiple: true,\n      onChange: this.onChangeHandler,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      class: \"modal-footer\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      type: \"button\",\n      class: \"btn btn-secondary\",\n      \"data-dismiss\": \"modal\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }, \"Cancelar\"), React.createElement(\"button\", {\n      type: \"submit\",\n      className: \"btn btn-default naranja\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"Agregar\")))))));\n  }\n\n}\n\nconst generarInput = ({\n  input,\n  placeholder,\n  label,\n  type,\n  meta: {\n    touched,\n    warning,\n    error\n  }\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 140\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 141\n  },\n  __self: this\n}, React.createElement(\"input\", Object.assign({}, input, {\n  type: type,\n  className: \"form-control letra form-control-solid placeholder-no-fix\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 142\n  },\n  __self: this\n})), touched && (error && React.createElement(\"span\", {\n  className: \"text-danger letra form-group\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 143\n  },\n  __self: this\n}, error) || warning && React.createElement(\"span\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 143\n  },\n  __self: this\n}, warning))));\n\nfunction mapStateToProps(state) {\n  return {\n    listAnnexVersion: state.annexVersion.listAnnexVersionR,\n    annexS: state.annex.annexR\n  };\n}\n\nlet formAdd = reduxForm({\n  form: 'addVersion',\n  enableReinitialize: true\n})(AddVersion);\nexport default withRouter(connect(mapStateToProps, {\n  addAnnex,\n  getAnnexVersions,\n  addAnnexVersion\n})(formAdd));","map":{"version":3,"sources":["C:/Users/hashy/Desktop/proyectosESCOM/frontend/ESCOM-view/src/ModuloDocumental/components/Leader/Documentation/AnnexSearch/addVersion.js"],"names":["React","Component","connect","addAnnex","reduxForm","Field","withRouter","required","ToastContainer","toast","getAnnexVersions","addAnnexVersion","AddVersion","componentWillMount","props","sessionStorage","getItem","constructor","checkMimeType","event","files","target","exte","name","split","pop","error","value","maxSelectFile","length","msg","warn","checkFileSize","size","onChangeHandler","setState","selectedFile","loaded","handleAdd","formValue","annexN","id","date","Date","location","description","descriptionA","state","version","annex","idUser","requestData","data","FormData","append","showAnnexVersions","randomInt","min","max","Math","floor","random","render","handleSubmit","generarInput","input","placeholder","label","type","meta","touched","warning","mapStateToProps","listAnnexVersion","annexVersion","listAnnexVersionR","annexS","annexR","formAdd","form","enableReinitialize"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { Component } from 'react';\r\nimport { connect } from 'react-redux';\r\nimport { addAnnex } from '../../../../redux/actions/annexA.js';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { required } from '../../../utilitarian/validations.js';\r\nimport { ToastContainer, toast } from 'react-toastify';\r\nimport { getAnnexVersions, addAnnexVersion } from '../../../../redux/actions/annexVersionA.js';\r\n\r\nclass AddVersion extends Component {\r\n\r\n    componentWillMount() {\r\n        this.props.getAnnexVersions(sessionStorage.getItem('annex'))\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            selectedFile: null,\r\n            loaded: 0\r\n        }\r\n\r\n    }\r\n    checkMimeType = (event) => {\r\n        let files = event.target.files\r\n\r\n        let exte = files[0].name.split('.').pop()\r\n        if (exte !== 'docx' && exte !== 'pdf') {\r\n            toast.error(exte + ' is not a supported format\\n')\r\n            event.target.value = null\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n    maxSelectFile = (event) => {\r\n        let files = event.target.files\r\n        if (files.length > 1) {\r\n            const msg = 'Only 1 images can be uploaded at a time'\r\n            event.target.value = null\r\n            toast.warn(msg)\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    checkFileSize = (event) => {\r\n        let files = event.target.files\r\n        let size = 50000000\r\n        if (files[0].size > size) {\r\n            toast.error('is too large, please pick a smaller file\\n')\r\n            event.target.value = null\r\n            return false\r\n        }\r\n        return true;\r\n    }\r\n    onChangeHandler = event => {\r\n        var files = event.target.files\r\n        if (this.maxSelectFile(event) && this.checkMimeType(event) && this.checkFileSize(event)) {\r\n            // if return true allow to setState\r\n            this.setState({\r\n                selectedFile: files,\r\n                loaded: 0\r\n            })\r\n        }\r\n    }\r\n\r\n    randomInt(min, max) {\r\n        return min + Math.floor((max - min) * Math.random());\r\n    }\r\n\r\n\r\n    handleAdd = formValue => {\r\n        let annexN = {\r\n            id: 0,\r\n            date: new Date(),\r\n            location: '',\r\n            description: formValue.descriptionA,\r\n            state: 1,\r\n            version: 0,\r\n            annex: sessionStorage.getItem('annex'),\r\n            idUser: 1,\r\n            requestData: null\r\n        }\r\n        const data = new FormData()\r\n        data.append('file', this.state.selectedFile[0])\r\n        this.props.addAnnexVersion(data, annexN);\r\n        this.props.showAnnexVersions(sessionStorage.getItem('annex'))\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <ToastContainer />\r\n                <button type=\"button\" className=\"btn text-light btn-sm float-right naranja \" data-toggle=\"modal\" data-target=\"#addModal\" >\r\n                    <i class=\"fas fa-plus\"></i> Agregar\r\n                </button>\r\n\r\n                {/** modal element add */}\r\n                <div class=\"modal fade\" id=\"addModal\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"exampleModalLabel\" aria-hidden=\"true\">\r\n                    <div class=\"modal-dialog\" role=\"document\">\r\n                        <div class=\"modal-content\">\r\n                            <form name=\"agregar\" className=\"form-horizontal\" onSubmit={this.props.handleSubmit(this.handleAdd)} id=\"hola\">\r\n\r\n                                <div class=\"modal-header\">\r\n                                    <h5 class=\"modal-title\" id=\"exampleModalLabel\">Agregar Annexo</h5>\r\n                                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\">\r\n                                        <span aria-hidden=\"true\">&times;</span>\r\n                                    </button>\r\n                                </div>\r\n                                <div class=\"modal-body\">\r\n\r\n                                    <label for=\"form_control_1\">Descripcion: </label>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-sm-5\">\r\n                                            <Field name=\"descriptionA\" validate={[required]} component={generarInput} label=\"Descripcion\" />\r\n                                        </div>\r\n                                    </div>\r\n                                    <br />\r\n                                    <label for=\"form_control_1\">Documento: </label>\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-sm-10\">\r\n                                            <input type=\"file\" class=\"form-control\" multiple onChange={this.onChangeHandler} />\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                                <div class=\"modal-footer\">\r\n                                    <button type=\"button\" class=\"btn btn-secondary\" data-dismiss=\"modal\">Cancelar</button>\r\n                                    <button type=\"submit\" className=\"btn btn-default naranja\">Agregar</button>\r\n                                </div>\r\n                            </form>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst generarInput = ({ input, placeholder, label, type, meta: { touched, warning, error } }) => (\r\n    <div>\r\n        <div>\r\n            <input {...input} type={type} className=\"form-control letra form-control-solid placeholder-no-fix\" />\r\n            {touched && ((error && <span className=\"text-danger letra form-group\">{error}</span>) || (warning && <span>{warning}</span>))}\r\n        </div>\r\n    </div>\r\n)\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        listAnnexVersion: state.annexVersion.listAnnexVersionR,\r\n        annexS: state.annex.annexR\r\n    }\r\n}\r\n\r\nlet formAdd = reduxForm({\r\n    form: 'addVersion',\r\n    enableReinitialize: true\r\n})(AddVersion)\r\nexport default withRouter(connect(mapStateToProps, { addAnnex, getAnnexVersions, addAnnexVersion })(formAdd));"]},"metadata":{},"sourceType":"module"}