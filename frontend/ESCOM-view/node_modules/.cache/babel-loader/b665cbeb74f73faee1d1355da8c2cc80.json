{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\SuperAdministrador\\\\componentes\\\\reportes\\\\ContenidoReportes.js\";\nimport React from 'react';\nimport 'react-notifications/lib/notifications.css';\nimport Button from '@material-ui/core/Button';\nimport Divider from '@material-ui/core/Divider';\nimport MaterialTable from 'material-table'; //componentes\n\nimport { generarInput, generarDate } from '../../utilitario/GenerarInputs.js';\nimport Barra from '../general/BarraDirecciones.js';\nimport { formatoFecha } from '../../utilitario/MensajesError.js';\nimport { seleccione } from '../../utilitario/validacionCampos.js';\nimport Select from 'react-select';\nimport SearchIcon from '@material-ui/icons/Search';\nimport ReplayIcon from '@material-ui/icons/Replay';\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\nimport { connect } from 'react-redux';\nimport { actionConsultarReporte, actualizarReporte, actualizarMensaje } from '../../actions/actionReporte.js';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport { reduxForm, Field } from 'redux-form';\nimport { withRouter } from 'react-router-dom';\nimport jsPDF from \"jspdf\";\nimport \"jspdf-autotable\";\n\nclass ContenidoReportes extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      valor: null,\n      textoAyuda: 'Buscar'\n    };\n\n    this.retornarValor = () => {\n      return this.state.valor;\n    };\n\n    this.handleChangeDos = selectedOption => {\n      switch (selectedOption.value) {\n        case 1:\n          this.setState({\n            textoAyuda: 'Ingrese el correo o numero de identificacion del usuario'\n          });\n          break;\n\n        case 2:\n          this.setState({\n            textoAyuda: 'Ingrese el nombre del modulo '\n          });\n          break;\n\n        case 3:\n          this.setState({\n            textoAyuda: 'Ingrese una palabra clave de la actividad'\n          });\n          break;\n\n        default:\n          this.setState({\n            textoAyuda: 'Buscar'\n          });\n          break;\n      }\n\n      this.setState({\n        valor: selectedOption\n      });\n    };\n\n    this.actividades = () => {\n      let opciones = [];\n      opciones[0] = {\n        label: 'Usuarios',\n        value: 1\n      };\n      opciones[1] = {\n        label: 'Modulos',\n        value: 2\n      };\n      opciones[2] = {\n        label: 'Actividades',\n        value: 3\n      };\n      return opciones;\n    };\n\n    this.handleSubmit = formValues => {\n      this.props.actualizarReporte();\n      this.props.actualizarMensaje('');\n\n      if (this.validarFechas(formatoFecha(formValues.fechaInicio), formatoFecha(formValues.fechaFin))) {\n        let reporte = {\n          idBusqueda: formValues.actividad.value,\n          palabraBusqueda: formValues.palabraBusqueda,\n          fechaInicio: formatoFecha(formValues.fechaInicio),\n          fechaFin: formatoFecha(formValues.fechaFin)\n        };\n        this.props.actionConsultarReporte(localStorage.getItem('Token'), reporte);\n      }\n    };\n\n    this.validarFechas = (fechaInicio, fechaFin) => {\n      if (fechaInicio > fechaFin | fechaInicio.getTime() === fechaFin.getTime()) {\n        NotificationManager.warning('Ingrese un rango de fechas valido');\n        return false;\n      } else {\n        return true;\n      }\n    };\n\n    this.devolverFechaString = fechaRecibida => {\n      debugger;\n      let meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\n      let dia = fechaRecibida.getUTCDate();\n      let mes = fechaRecibida.getUTCMonth();\n      let ano = fechaRecibida.getFullYear();\n      return `${dia}-${meses[mes]}-${ano}`;\n    };\n\n    this.exportPDF = () => {\n      // if (this.props.reporte.length === 0 | this.props.reporte === undefined) {\n      // \tNotificationManager.error('No hay datos para exportar');\n      // }\n      // else {\n      var doc = new jsPDF();\n      var totalPagesExp = '{total_pages_count_string}';\n      const headers = [[\"OPERACION\", \"MODULO\", \"TABLA INVOLUCRADA\", \"FECHA BITACORA\"]];\n      const data = this.props.reporte.map(elt => [elt.operacion, elt.nombreModulo, elt.tablaInvolucrada, elt.fechaBitacora]);\n      const logo = this.props.configuracion.logo;\n      let fechaHoy = new Date();\n      const fecha = this.devolverFechaString(fechaHoy);\n      doc.autoTable({\n        head: headers,\n        body: data,\n        didDrawPage: function (data) {\n          // Header\n          doc.setFontSize(10);\n          doc.setTextColor(40);\n          doc.setFontStyle('normal');\n          doc.addImage(logo, 'PNG', data.settings.margin.left, 8, 43, 15);\n          doc.text('Fecha de generacion:' + fecha, data.settings.margin.left + 125, 12);\n          doc.text('Fecha de inicio: ', data.settings.margin.left + 125, 16); // Footer\n\n          var str = 'Pagina ' + doc.internal.getNumberOfPages(); // Total page number plugin only available in jspdf v1.0+\n\n          if (typeof doc.putTotalPages === 'function') {\n            str = str + ' of ' + totalPagesExp;\n          }\n\n          doc.setFontSize(10); // jsPDF 1.4+ uses getWidth, <1.4 uses .width\n\n          var pageSize = doc.internal.pageSize;\n          var pageHeight = pageSize.height ? pageSize.height : pageSize.getHeight();\n          doc.text(str, data.settings.margin.left, pageHeight - 10);\n        },\n        margin: {\n          top: 30\n        }\n      });\n      doc.save('myrepo.pdf'); // }\n    };\n\n    this.reiniciar = this.reiniciar.bind(this);\n    this.exportPDF = this.exportPDF.bind(this);\n  }\n\n  componentDidUpdate() {\n    switch (this.props.mensaje) {\n      case 'No se encontraron reportes':\n        NotificationManager.warning('No se encontraron resultados');\n        break;\n\n      default:\n        break;\n    }\n\n    this.props.actualizarMensaje('');\n  }\n\n  reiniciar() {\n    this.props.actualizarMensaje('');\n    this.setState({\n      valor: null\n    });\n    this.setState({\n      textoAyuda: 'Buscar'\n    });\n    this.props.actualizarReporte();\n    this.props.reset();\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"text-left titulo\",\n      style: estiloLetrero,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, \"Reportes\")), React.createElement(Barra, {\n      texto: \"Inicio > Reportes\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      style: {\n        paddingTop: \"20px\",\n        paddingRight: \"46px\",\n        paddingLeft: \"40px\",\n        paddingBottom: \"7px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        paddingTop: \"7px\",\n        paddingRight: \"44px\",\n        paddingLeft: \"40px\",\n        paddingBottom: \"20px\",\n        margin: \"0px 0px 32px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container shadow\",\n      style: {\n        background: \"white\",\n        padding: \"27px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.handleSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-4\",\n      style: {\n        paddingTop: \"15px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"actividad\",\n      validate: [seleccione],\n      valor: this.retornarValor(),\n      onChange: this.handleChangeDos,\n      component: ReduxFormSelectDos,\n      options: this.actividades(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"palabraBusqueda\",\n      component: generarInput,\n      className: \"form-control\",\n      label: this.state.textoAyuda,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      style: {\n        paddingTop: \"20px\",\n        paddingRight: \"2px\",\n        paddingLeft: \"15px\",\n        paddingBottom: \"2px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 211\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"fechaInicio\",\n      type: \"date\",\n      component: generarDate,\n      label: \"Fecha de inicio\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 214\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"fechaFin\",\n      type: \"date\",\n      component: generarDate,\n      label: \"Fecha de fin\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    })))), React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      style: {\n        paddingTop: \"20px\",\n        paddingRight: \"2px\",\n        paddingLeft: \"15px\",\n        paddingBottom: \"2px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 222\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      style: {\n        paddingLeft: \"300px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      startIcon: React.createElement(SearchIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231\n        },\n        __self: this\n      }),\n      className: \"btn btn-dark\",\n      style: {\n        background: this.props.configuracion.botones,\n        fontSize: \"14px\",\n        textTransform: \"none\"\n      },\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 230\n      },\n      __self: this\n    }, \"Buscar\")), React.createElement(\"div\", {\n      className: \"col-sm-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 236\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: this.reiniciar,\n      className: \"btn btn-dark\",\n      style: {\n        background: \"gray\",\n        fontSize: \"14px\",\n        textTransform: \"none\"\n      },\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 237\n      },\n      __self: this\n    }, React.createElement(ReplayIcon, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    })))))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 246\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      variant: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 247\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 248\n      },\n      __self: this\n    }), React.createElement(MaterialTable, {\n      title: \"\",\n      localization: {\n        header: {\n          actions: ' '\n        },\n        pagination: {\n          nextTooltip: 'Siguiente ',\n          previousTooltip: 'Anterior',\n          labelDisplayedRows: '{from}-{to} de {count}',\n          lastTooltip: 'Ultima pagina',\n          firstTooltip: 'Primera pagina',\n          labelRowsSelect: 'Registros',\n          firstAriaLabel: 'oooo'\n        },\n        body: {\n          emptyDataSourceMessage: 'Ningun registro de bitacora encontrado'\n        },\n        toolbar: {\n          searchTooltip: 'Buscar',\n          searchPlaceholder: 'Buscar',\n          nRowsSelected: '{0} actividades seleccionadas'\n        }\n      },\n      columns: [{\n        title: 'Operacion',\n        field: 'operacion',\n        headerStyle: estiloCabecera,\n        cellStyle: estiloFila\n      }, {\n        title: 'Nombre del modulo',\n        field: 'nombreModulo',\n        headerStyle: estiloCabecera,\n        cellStyle: estiloFila\n      }, {\n        title: 'Tabla involucrada',\n        field: 'tablaInvolucrada',\n        headerStyle: estiloCabecera,\n        cellStyle: estiloFila\n      }, {\n        title: 'Fecha de bitacora',\n        field: 'fechaBitacora',\n        headerStyle: estiloCabecera,\n        cellStyle: estiloFila\n      }],\n      data: this.props.reporte,\n      options: {\n        search: false,\n        rowStyle: estiloFila\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 250\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 286\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      style: {\n        paddingLeft: \"400px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 287\n      },\n      __self: this\n    }, React.createElement(Button, {\n      onClick: () => this.exportPDF(),\n      startIcon: React.createElement(PictureAsPdfIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 290\n        },\n        __self: this\n      }),\n      className: \"btn btn-dark\",\n      style: {\n        background: \"#DF1417\",\n        fontSize: \"14px\",\n        textTransform: \"none\"\n      },\n      variant: \"contained\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288\n      },\n      __self: this\n    }, \"Generar PDF\")))), React.createElement(NotificationContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 298\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport const ReduxFormSelectDos = props => {\n  const customStyles = {\n    option: (provided, state) => _objectSpread({}, provided, {\n      fontSize: 13\n    }),\n    control: styles => _objectSpread({}, styles, {\n      backgroundColor: 'white',\n      fontSize: 13,\n      fontFamily: 'sans-serif'\n    }),\n    singleValue: (provided, state) => {\n      const opacity = state.isDisabled ? 0.5 : 1;\n      const transition = 'opacity 300ms';\n      return _objectSpread({}, provided, {\n        opacity,\n        transition\n      });\n    }\n  };\n  const input = props.input,\n        options = props.options;\n  const _props$meta = props.meta,\n        touched = _props$meta.touched,\n        error = _props$meta.error;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 322\n    },\n    __self: this\n  }, React.createElement(Select, Object.assign({}, input, {\n    styles: customStyles,\n    maxMenuHeight: 185,\n    isSearchable: true,\n    value: props.valor,\n    placeholder: \"Seleccione\",\n    onChange: value => input.onChange(value),\n    onBlur: () => input.onBlur(input.value),\n    options: options,\n    noOptionsMessage: () => 'No hay ninguna actividad que mostrar',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  })), touched && error && React.createElement(\"span\", {\n    className: \"text-danger letra form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 335\n    },\n    __self: this\n  }, error));\n};\nconst estiloCabecera = {\n  fontSize: '14px',\n  fontFamily: 'sans-serif',\n  padding: '8px',\n  background: '#e7ecf1'\n};\nconst estiloFila = {\n  fontSize: '13px',\n  fontFamily: 'sans-serif',\n  padding: '8px'\n};\nconst estiloLetrero = {\n  paddingTop: \"20px\",\n  paddingRight: \"12px\",\n  paddingLeft: \"40px\",\n  paddingBottom: \"1px\"\n};\n\nfunction mapStateToProps(state) {\n  return {\n    reporte: state.rep.reporte,\n    mensaje: state.rep.mensajeReporte,\n    configuracion: state.conf.configuracion\n  };\n}\n\nlet reporte = reduxForm({\n  form: 'reporte'\n})(ContenidoReportes);\nexport default withRouter(connect(mapStateToProps, {\n  actionConsultarReporte,\n  actualizarReporte,\n  actualizarMensaje\n})(reporte));","map":{"version":3,"sources":["C:/Users/jeiso/Desktop/proyectosESCOM/frontend/ESCOM-view/src/SuperAdministrador/componentes/reportes/ContenidoReportes.js"],"names":["React","Button","Divider","MaterialTable","generarInput","generarDate","Barra","formatoFecha","seleccione","Select","SearchIcon","ReplayIcon","PictureAsPdfIcon","connect","actionConsultarReporte","actualizarReporte","actualizarMensaje","NotificationContainer","NotificationManager","reduxForm","Field","withRouter","jsPDF","ContenidoReportes","Component","constructor","props","state","valor","textoAyuda","retornarValor","handleChangeDos","selectedOption","value","setState","actividades","opciones","label","handleSubmit","formValues","validarFechas","fechaInicio","fechaFin","reporte","idBusqueda","actividad","palabraBusqueda","localStorage","getItem","getTime","warning","devolverFechaString","fechaRecibida","meses","dia","getUTCDate","mes","getUTCMonth","ano","getFullYear","exportPDF","doc","totalPagesExp","headers","data","map","elt","operacion","nombreModulo","tablaInvolucrada","fechaBitacora","logo","configuracion","fechaHoy","Date","fecha","autoTable","head","body","didDrawPage","setFontSize","setTextColor","setFontStyle","addImage","settings","margin","left","text","str","internal","getNumberOfPages","putTotalPages","pageSize","pageHeight","height","getHeight","top","save","reiniciar","bind","componentDidUpdate","mensaje","reset","render","estiloLetrero","paddingTop","paddingRight","paddingLeft","paddingBottom","background","padding","ReduxFormSelectDos","botones","fontSize","textTransform","header","actions","pagination","nextTooltip","previousTooltip","labelDisplayedRows","lastTooltip","firstTooltip","labelRowsSelect","firstAriaLabel","emptyDataSourceMessage","toolbar","searchTooltip","searchPlaceholder","nRowsSelected","title","field","headerStyle","estiloCabecera","cellStyle","estiloFila","search","rowStyle","customStyles","option","provided","control","styles","backgroundColor","fontFamily","singleValue","opacity","isDisabled","transition","input","options","meta","touched","error","onChange","onBlur","mapStateToProps","rep","mensajeReporte","conf","form"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport Divider from '@material-ui/core/Divider';\r\nimport MaterialTable from 'material-table';\r\n//componentes\r\nimport { generarInput, generarDate } from '../../utilitario/GenerarInputs.js'\r\n\r\nimport Barra from '../general/BarraDirecciones.js'\r\nimport { formatoFecha } from '../../utilitario/MensajesError.js';\r\nimport { seleccione } from '../../utilitario/validacionCampos.js';\r\nimport Select from 'react-select'\r\nimport SearchIcon from '@material-ui/icons/Search';\r\nimport ReplayIcon from '@material-ui/icons/Replay';\r\nimport PictureAsPdfIcon from '@material-ui/icons/PictureAsPdf';\r\nimport { connect } from 'react-redux';\r\nimport { actionConsultarReporte, actualizarReporte, actualizarMensaje } from '../../actions/actionReporte.js';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { withRouter } from 'react-router-dom';\r\nimport jsPDF from \"jspdf\";\r\nimport \"jspdf-autotable\";\r\n\r\nclass ContenidoReportes extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.reiniciar = this.reiniciar.bind(this);\r\n\t\tthis.exportPDF = this.exportPDF.bind(this);\r\n\t}\r\n\tstate = {\r\n\t\tvalor: null,\r\n\t\ttextoAyuda: 'Buscar'\r\n\t}\r\n\tretornarValor = () => {\r\n\t\treturn this.state.valor;\r\n\t}\r\n\r\n\thandleChangeDos = selectedOption => {\r\n\t\tswitch (selectedOption.value) {\r\n\t\t\tcase 1:\r\n\t\t\t\tthis.setState({textoAyuda:'Ingrese el correo o numero de identificacion del usuario'})\r\n\t\t\t\tbreak;\r\n\t\t\tcase 2:\r\n\t\t\t\tthis.setState({textoAyuda:'Ingrese el nombre del modulo '})\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tcase 3:\r\n\t\t\t\tthis.setState({textoAyuda:'Ingrese una palabra clave de la actividad'})\r\n\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tthis.setState({textoAyuda:'Buscar'})\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t\tthis.setState({valor:selectedOption});\r\n\t};\r\n\r\n\tactividades = () => {\r\n\t\tlet opciones = [];\r\n\t\topciones[0] = {\r\n\t\t\tlabel: 'Usuarios',\r\n\t\t\tvalue: 1,\r\n\t\t}\r\n\t\topciones[1] = {\r\n\t\t\tlabel: 'Modulos',\r\n\t\t\tvalue: 2,\r\n\t\t}\r\n\t\topciones[2] = {\r\n\t\t\tlabel: 'Actividades',\r\n\t\t\tvalue: 3,\r\n\t\t}\r\n\t\treturn opciones;\r\n\t}\r\n\tcomponentDidUpdate() {\r\n\t\tswitch (this.props.mensaje) {\r\n\t\t\tcase 'No se encontraron reportes':\r\n\t\t\t\tNotificationManager.warning('No se encontraron resultados');\r\n\t\t\t\tbreak;\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\t\tthis.props.actualizarMensaje('');\r\n\t}\r\n\r\n\r\n\r\n\thandleSubmit = formValues => {\r\n\t\tthis.props.actualizarReporte();\r\n\t\tthis.props.actualizarMensaje('');\r\n\t\tif (this.validarFechas(formatoFecha(formValues.fechaInicio), formatoFecha(formValues.fechaFin))) {\r\n\t\t\tlet reporte = {\r\n\t\t\t\tidBusqueda: formValues.actividad.value,\r\n\t\t\t\tpalabraBusqueda: formValues.palabraBusqueda,\r\n\t\t\t\tfechaInicio: formatoFecha(formValues.fechaInicio),\r\n\t\t\t\tfechaFin: formatoFecha(formValues.fechaFin)\r\n\t\t\t}\r\n\t\t\tthis.props.actionConsultarReporte(localStorage.getItem('Token'), reporte);\r\n\t\t}\r\n\t}\r\n\r\n\tvalidarFechas = (fechaInicio, fechaFin) => {\r\n\t\tif ((fechaInicio > fechaFin) | (fechaInicio.getTime() === fechaFin.getTime())) {\r\n\t\t\tNotificationManager.warning('Ingrese un rango de fechas valido');\r\n\t\t\treturn false;\r\n\t\t} else {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t}\r\n\r\n\treiniciar() {\r\n\t\tthis.props.actualizarMensaje('');\r\n\t\tthis.setState({ valor: null });\r\n\t\tthis.setState({textoAyuda:'Buscar'})\r\n\t\tthis.props.actualizarReporte();\r\n\t\tthis.props.reset();\r\n\t}\r\n\r\n\tdevolverFechaString=fechaRecibida=>{\r\n\t\tdebugger;\r\n\t\tlet meses = [\"Enero\", \"Febrero\", \"Marzo\", \"Abril\", \"Mayo\", \"Junio\", \"Julio\", \"Agosto\", \"Septiembre\", \"Octubre\", \"Noviembre\", \"Diciembre\"];\r\n\t\tlet dia = fechaRecibida.getUTCDate();\r\n\t\tlet mes = fechaRecibida.getUTCMonth();\r\n\t\tlet ano = fechaRecibida.getFullYear();\r\n\t\treturn `${dia}-${meses[mes]}-${ano}`;\r\n\t}\r\n\r\n\texportPDF = () => {\r\n\t\t// if (this.props.reporte.length === 0 | this.props.reporte === undefined) {\r\n\t\t// \tNotificationManager.error('No hay datos para exportar');\r\n\t\t// }\r\n\t\t// else {\r\n\t\t\tvar doc = new jsPDF()\r\n\t\t\tvar totalPagesExp = '{total_pages_count_string}'\r\n\t\t\tconst headers = [[\"OPERACION\", \"MODULO\", \"TABLA INVOLUCRADA\", \"FECHA BITACORA\"]];\r\n\t\t\tconst data = this.props.reporte.map(elt => [elt.operacion, elt.nombreModulo, elt.tablaInvolucrada, elt.fechaBitacora]);\r\n\t\t\tconst logo = this.props.configuracion.logo;\r\n\t\t\tlet fechaHoy=new Date();\r\n\t\t\tconst fecha=this.devolverFechaString(fechaHoy);\r\n\t\t\tdoc.autoTable({\r\n\t\t\t\thead: headers,\r\n\t\t\t\tbody: data,\r\n\t\t\t\tdidDrawPage: function (data) {\r\n\t\t\t\t\t// Header\r\n\t\t\t\t\tdoc.setFontSize(10);\r\n\t\t\t\t\tdoc.setTextColor(40);\r\n\t\t\t\t\tdoc.setFontStyle('normal');\r\n\t\t\t\t\tdoc.addImage(logo, 'PNG', data.settings.margin.left, 8, 43, 15);\r\n\t\t\t\t\tdoc.text('Fecha de generacion:'+fecha, data.settings.margin.left +125, 12)\r\n\t\t\t\t\tdoc.text('Fecha de inicio: ', data.settings.margin.left + 125,16);\r\n\t\t\t\t\t// Footer\r\n\t\t\t\t\tvar str = 'Pagina ' + doc.internal.getNumberOfPages()\r\n\t\t\t\t\t// Total page number plugin only available in jspdf v1.0+\r\n\t\t\t\t\tif (typeof doc.putTotalPages === 'function') {\r\n\t\t\t\t\t\tstr = str + ' of ' + totalPagesExp\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdoc.setFontSize(10)\r\n\r\n\t\t\t\t\t// jsPDF 1.4+ uses getWidth, <1.4 uses .width\r\n\t\t\t\t\tvar pageSize = doc.internal.pageSize\r\n\t\t\t\t\tvar pageHeight = pageSize.height ? pageSize.height : pageSize.getHeight()\r\n\t\t\t\t\tdoc.text(str, data.settings.margin.left, pageHeight - 10)\r\n\t\t\t\t},\r\n\t\t\t\tmargin: { top: 30 },\r\n\t\t\t})\r\n\t\t\tdoc.save('myrepo.pdf');\r\n\t\t// }\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div className=\"text-left titulo\" style={estiloLetrero}>\r\n\t\t\t\t\t<h4>Reportes</h4>\r\n\t\t\t\t</div>\r\n\t\t\t\t<Barra texto=\"Inicio > Reportes\" />\r\n\t\t\t\t<div className=\"col-sm-12\" style={{\r\n\t\t\t\t\tpaddingTop: \"20px\",\r\n\t\t\t\t\tpaddingRight: \"46px\",\r\n\t\t\t\t\tpaddingLeft: \"40px\",\r\n\t\t\t\t\tpaddingBottom: \"7px\",\r\n\t\t\t\t}}>\r\n\t\t\t\t</div>\r\n\t\t\t\t<div className=\"container\" style={{\r\n\t\t\t\t\tpaddingTop: \"7px\",\r\n\t\t\t\t\tpaddingRight: \"44px\",\r\n\t\t\t\t\tpaddingLeft: \"40px\",\r\n\t\t\t\t\tpaddingBottom: \"20px\",\r\n\t\t\t\t\tmargin: \"0px 0px 32px\"\r\n\t\t\t\t}}>\r\n\t\t\t\t\t<div className=\"container shadow\" style={{ background: \"white\", padding: \"27px\" }}>\r\n\t\t\t\t\t\t<form onSubmit={this.props.handleSubmit(this.handleSubmit)}>\r\n\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t<div className=\"col-sm-4\" style={{ paddingTop: \"15px\" }}>\r\n\t\t\t\t\t\t\t\t\t<Field name=\"actividad\" validate={[seleccione]} valor={this.retornarValor()} onChange={this.handleChangeDos} component={ReduxFormSelectDos} options={this.actividades()} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div className=\"col-sm-8\">\r\n\t\t\t\t\t\t\t\t\t<Field name=\"palabraBusqueda\" component={generarInput} className=\"form-control\" label={this.state.textoAyuda} />\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-12\" style={{\r\n\t\t\t\t\t\t\t\tpaddingTop: \"20px\",\r\n\t\t\t\t\t\t\t\tpaddingRight: \"2px\",\r\n\t\t\t\t\t\t\t\tpaddingLeft: \"15px\",\r\n\t\t\t\t\t\t\t\tpaddingBottom: \"2px\",\r\n\t\t\t\t\t\t\t}}>\r\n\r\n\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-sm-6\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Field name=\"fechaInicio\" type=\"date\" component={generarDate} label=\"Fecha de inicio\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-sm-6\">\r\n\r\n\t\t\t\t\t\t\t\t\t\t<Field name=\"fechaFin\" type=\"date\" component={generarDate} label=\"Fecha de fin\" />\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t<div className=\"col-sm-12\" style={{\r\n\t\t\t\t\t\t\t\tpaddingTop: \"20px\",\r\n\t\t\t\t\t\t\t\tpaddingRight: \"2px\",\r\n\t\t\t\t\t\t\t\tpaddingLeft: \"15px\",\r\n\t\t\t\t\t\t\t\tpaddingBottom: \"2px\",\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<div className=\"row\">\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-sm-6\" style={{ paddingLeft: \"300px\" }}>\r\n\t\t\t\t\t\t\t\t\t\t<Button type=\"submit\"\r\n\t\t\t\t\t\t\t\t\t\t\tstartIcon={<SearchIcon />}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-dark\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: this.props.configuracion.botones, fontSize: \"14px\", textTransform: \"none\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\">Buscar</Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t<div className=\"col-sm-6\">\r\n\t\t\t\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\t\t\t\tonClick={this.reiniciar}\r\n\t\t\t\t\t\t\t\t\t\t\tclassName=\"btn btn-dark\"\r\n\t\t\t\t\t\t\t\t\t\t\tstyle={{ background: \"gray\", fontSize: \"14px\", textTransform: \"none\" }}\r\n\t\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"><ReplayIcon /></Button>\r\n\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<Divider variant=\"middle\" />\r\n\t\t\t\t\t\t<br />\r\n\r\n\t\t\t\t\t\t<MaterialTable\r\n\t\t\t\t\t\t\ttitle=''\r\n\t\t\t\t\t\t\tlocalization={{\r\n\t\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t\tactions: ' '\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tpagination: {\r\n\t\t\t\t\t\t\t\t\tnextTooltip: 'Siguiente ',\r\n\t\t\t\t\t\t\t\t\tpreviousTooltip: 'Anterior',\r\n\t\t\t\t\t\t\t\t\tlabelDisplayedRows: '{from}-{to} de {count}',\r\n\t\t\t\t\t\t\t\t\tlastTooltip: 'Ultima pagina',\r\n\t\t\t\t\t\t\t\t\tfirstTooltip: 'Primera pagina',\r\n\t\t\t\t\t\t\t\t\tlabelRowsSelect: 'Registros',\r\n\t\t\t\t\t\t\t\t\tfirstAriaLabel: 'oooo'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tbody: {\r\n\t\t\t\t\t\t\t\t\temptyDataSourceMessage: 'Ningun registro de bitacora encontrado'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\ttoolbar: {\r\n\t\t\t\t\t\t\t\t\tsearchTooltip: 'Buscar',\r\n\t\t\t\t\t\t\t\t\tsearchPlaceholder: 'Buscar',\r\n\t\t\t\t\t\t\t\t\tnRowsSelected: '{0} actividades seleccionadas',\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tcolumns={[\r\n\t\t\t\t\t\t\t\t{ title: 'Operacion', field: 'operacion', headerStyle: estiloCabecera, cellStyle: estiloFila },\r\n\t\t\t\t\t\t\t\t{ title: 'Nombre del modulo', field: 'nombreModulo', headerStyle: estiloCabecera, cellStyle: estiloFila },\r\n\t\t\t\t\t\t\t\t{ title: 'Tabla involucrada', field: 'tablaInvolucrada', headerStyle: estiloCabecera, cellStyle: estiloFila },\r\n\t\t\t\t\t\t\t\t{ title: 'Fecha de bitacora', field: 'fechaBitacora', headerStyle: estiloCabecera, cellStyle: estiloFila },\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\tdata={this.props.reporte}\r\n\t\t\t\t\t\t\toptions={{\r\n\t\t\t\t\t\t\t\tsearch: false,\r\n\t\t\t\t\t\t\t\trowStyle: estiloFila\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<br />\r\n\t\t\t\t\t\t<div style={{ paddingLeft: \"400px\" }}>\r\n\t\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\t\tonClick={() => this.exportPDF()}\r\n\t\t\t\t\t\t\t\tstartIcon={<PictureAsPdfIcon />}\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-dark\"\r\n\t\t\t\t\t\t\t\tstyle={{ background: \"#DF1417\", fontSize: \"14px\", textTransform: \"none\" }}\r\n\t\t\t\t\t\t\t\tvariant=\"contained\">Generar PDF</Button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t\t<NotificationContainer />\r\n\t\t\t</div >\r\n\t\t);\r\n\t}\r\n\r\n\r\n}\r\n\r\nexport const ReduxFormSelectDos = props => {\r\n\tconst customStyles = {\r\n\t\toption: (provided, state) => ({\r\n\t\t\t...provided,\r\n\t\t\tfontSize: 13\r\n\t\t}),\r\n\t\tcontrol: styles => ({ ...styles, backgroundColor: 'white', fontSize: 13, fontFamily: 'sans-serif' }),\r\n\t\tsingleValue: (provided, state) => {\r\n\t\t\tconst opacity = state.isDisabled ? 0.5 : 1;\r\n\t\t\tconst transition = 'opacity 300ms';\r\n\t\t\treturn { ...provided, opacity, transition };\r\n\t\t}\r\n\t}\r\n\tconst { input, options } = props;\r\n\tconst { touched, error } = props.meta;\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<Select\r\n\t\t\t\t{...input}\r\n\t\t\t\tstyles={customStyles}\r\n\t\t\t\tmaxMenuHeight={185}\r\n\t\t\t\tisSearchable={true}\r\n\t\t\t\tvalue={props.valor}\r\n\t\t\t\tplaceholder='Seleccione'\r\n\t\t\t\tonChange={value => input.onChange(value)}\r\n\t\t\t\tonBlur={() => input.onBlur(input.value)}\r\n\t\t\t\toptions={options}\r\n\t\t\t\tnoOptionsMessage={() => 'No hay ninguna actividad que mostrar'}\r\n\t\t\t/>\r\n\t\t\t{touched && ((error && <span className=\"text-danger letra form-group\">{error}</span>))}\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst estiloCabecera = {\r\n\tfontSize: '14px',\r\n\tfontFamily: 'sans-serif',\r\n\tpadding: '8px',\r\n\tbackground: '#e7ecf1'\r\n\r\n}\r\n\r\nconst estiloFila = {\r\n\tfontSize: '13px',\r\n\tfontFamily: 'sans-serif',\r\n\tpadding: '8px',\r\n}\r\n\r\n\r\nconst estiloLetrero = {\r\n\tpaddingTop: \"20px\",\r\n\tpaddingRight: \"12px\",\r\n\tpaddingLeft: \"40px\",\r\n\tpaddingBottom: \"1px\"\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n\treturn {\r\n\t\treporte: state.rep.reporte,\r\n\t\tmensaje: state.rep.mensajeReporte,\r\n\t\tconfiguracion: state.conf.configuracion\r\n\t}\r\n}\r\n\r\nlet reporte = reduxForm({\r\n\tform: 'reporte'\r\n})(ContenidoReportes)\r\n\r\nexport default withRouter(connect(mapStateToProps, { actionConsultarReporte, actualizarReporte, actualizarMensaje })(reporte));\r\n"]},"metadata":{},"sourceType":"module"}