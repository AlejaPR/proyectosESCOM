{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\SuperAdministrador\\\\componentes\\\\popup\\\\PopUpActividad.js\";\nimport React from 'react';\nimport 'react-notifications/lib/notifications.css';\nimport Select from 'react-select';\nimport Button from '@material-ui/core/Button';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport { reduxForm, Field } from 'redux-form';\nimport { withRouter } from 'react-router-dom';\nimport { generarInput, generarArea } from '../../utilitario/GenerarInputs.js';\nimport { seleccione, validacionCuarentaCaracteres, validacionDoscientosCaracteres, requerido } from '../../utilitario/validacionCampos.js';\nimport AddIcon from '@material-ui/icons/Add';\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport { actionConsultarModulos, actionConsultarActividades, actionConsultarCantidadActividades, actionAgregarActividad, actualizarMensajeRegistrar } from '../../actions/actionActividad.js';\nimport { connect } from 'react-redux';\n\nclass PopUpActividad extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.opciones = () => {\n      let respuesta = [];\n      this.props.modulos.forEach(modulo => {\n        let objeto = {\n          label: modulo.nombreModulo,\n          value: modulo.idModulo\n        };\n        respuesta.push(objeto);\n      });\n      return respuesta;\n    };\n\n    this.handleSubmit = formValues => {\n      try {\n        let actividad = {\n          'nombre': formValues.nombre,\n          'descripcionActividad': formValues.descripcion,\n          'idModulo': formValues.modulo.value,\n          'moduloActividad': formValues.modulo.label,\n          'estado': 'Activo'\n        };\n        this.props.actionAgregarActividad(actividad, localStorage.getItem('Token'));\n        this.props.reset();\n      } catch (error) {\n        NotificationManager.error('Ingrese todos los datos');\n      }\n    };\n\n    this.state = {\n      modal: false\n    };\n    this.toggle = this.toggle.bind(this);\n  }\n\n  toggle() {\n    this.setState(prevState => ({\n      modal: !prevState.modal\n    }));\n    this.props.reset();\n  }\n\n  componentWillMount() {\n    this.props.actionConsultarModulos(localStorage.getItem('Token'));\n  }\n\n  componentDidUpdate() {\n    switch (this.props.mensaje) {\n      case 'actividad registrada':\n        NotificationManager.success('Actividad registrada correctamente');\n        this.props.actionConsultarActividades(localStorage.getItem('Token'), this.state.rowsPerPage, this.state.page);\n        this.props.actionConsultarCantidadActividades(localStorage.getItem('Token'));\n        this.props.actualizarMensajeRegistrar('');\n        break;\n\n      case 'Sin permiso':\n        NotificationManager.error('No tiene permisos sucifientes para registrar una actividad');\n        this.props.actualizarMensajeRegistrar('');\n        break;\n\n      case 'La actividad ya se encuentra registrada':\n        NotificationManager.error('La actividad se encuentra registrada intente de nuevo con otro nombre');\n        this.props.actualizarMensajeRegistrar('');\n        break;\n\n      case 'El modulo no se encuentra registrado':\n        NotificationManager.error('El modulo seleccionado no se encuentra registrado');\n        this.props.actualizarMensajeRegistrar('');\n        break;\n\n      case 'Ocurrio un error en el servidor':\n        NotificationManager.error('Ocurrio un error en el servidor');\n        break;\n\n      case 'Servidor fuera de servicio temporalmente':\n        NotificationManager.error('Servidor fuera de servicio temporalmente');\n        break;\n\n      case 'Token requerido':\n        localStorage.removeItem('Token');\n        window.location.href = \"/\";\n        break;\n\n      case 'token vencido':\n        localStorage.removeItem('Token');\n        window.location.href = \"/\";\n        break;\n\n      case 'token no registrado':\n        localStorage.removeItem('Token');\n        window.location.href = \"/\";\n        break;\n\n      case 'token incorrecto':\n        localStorage.removeItem('Token');\n        window.location.href = \"/\";\n        break;\n\n      default:\n        break;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: this.props.configuracion.botones,\n        fontSize: \"14px\",\n        textTransform: \"none\"\n      },\n      startIcon: React.createElement(AddIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 125\n        },\n        __self: this\n      }),\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, \"Registrar actividad\"), React.createElement(Modal, {\n      isOpen: this.state.modal,\n      toggle: this.toggle,\n      className: this.props.className,\n      size: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, \"Crear actividad\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.handleSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 134\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"nombre\",\n      validate: [requerido, validacionCuarentaCaracteres],\n      component: generarInput,\n      label: \"Nombre\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"descripcion\",\n      component: generarArea,\n      filas: 4,\n      validate: [requerido, validacionDoscientosCaracteres],\n      label: \"Descripcion\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      style: {\n        paddingTop: \"9px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"modulo\",\n      validate: [seleccione],\n      component: ReduxFormSelect,\n      options: this.opciones(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146\n      },\n      __self: this\n    }))), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: this.props.configuracion.botones,\n        fontSize: \"13px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      startIcon: React.createElement(SaveAltIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 150\n        },\n        __self: this\n      }),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150\n      },\n      __self: this\n    }, \"Registrar\"), '', React.createElement(Button, {\n      style: fondoBotonCancelar,\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      startIcon: React.createElement(CancelIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 151\n        },\n        __self: this\n      }),\n      onClick: this.toggle,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Cancelar\"))))), React.createElement(NotificationContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 156\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport const ReduxFormSelect = props => {\n  const customStyles = {\n    option: (provided, state) => _objectSpread({}, provided, {\n      fontSize: 13\n    }),\n    control: styles => _objectSpread({}, styles, {\n      backgroundColor: 'white',\n      fontSize: 13,\n      fontFamily: 'sans-serif'\n    }),\n    singleValue: (provided, state) => {\n      const opacity = state.isDisabled ? 0.5 : 1;\n      const transition = 'opacity 300ms';\n      return _objectSpread({}, provided, {\n        opacity,\n        transition\n      });\n    }\n  };\n  const input = props.input,\n        options = props.options;\n  const _props$meta = props.meta,\n        touched = _props$meta.touched,\n        error = _props$meta.error;\n  return React.createElement(React.Fragment, null, React.createElement(Select, Object.assign({}, input, {\n    styles: customStyles,\n    isSearchable: false,\n    placeholder: \"Seleccione un modulo\",\n    onChange: value => input.onChange(value),\n    onBlur: () => input.onBlur(input.value),\n    noOptionsMessage: () => 'Aun no hay ningun modulo registrado',\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179\n    },\n    __self: this\n  })), touched && error && React.createElement(\"span\", {\n    className: \"text-danger form-group\",\n    style: {\n      fontSize: '12px',\n      fontFamily: 'sans-serif'\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  }, error));\n};\nconst fondoBotonCancelar = {\n  background: \"gray\",\n  fontSize: \"13px\",\n  fontFamily: \"sans-serif\",\n  textTransform: \"none\"\n};\n\nfunction mapStateToProps(state) {\n  return {\n    modulos: state.act.modulosActividades,\n    mensaje: state.act.mensajeRegistrar,\n    configuracion: state.conf.configuracion\n  };\n}\n\nlet formulario = reduxForm({\n  form: 'registrarActividad'\n})(PopUpActividad);\nexport default withRouter(connect(mapStateToProps, {\n  actionConsultarModulos,\n  actionConsultarActividades,\n  actionConsultarCantidadActividades,\n  actionAgregarActividad,\n  actualizarMensajeRegistrar\n})(formulario));","map":{"version":3,"sources":["C:/Users/jeiso/Desktop/proyectosESCOM/frontend/ESCOM-view/src/SuperAdministrador/componentes/popup/PopUpActividad.js"],"names":["React","Select","Button","Modal","ModalHeader","ModalBody","ModalFooter","NotificationContainer","NotificationManager","reduxForm","Field","withRouter","generarInput","generarArea","seleccione","validacionCuarentaCaracteres","validacionDoscientosCaracteres","requerido","AddIcon","SaveAltIcon","CancelIcon","actionConsultarModulos","actionConsultarActividades","actionConsultarCantidadActividades","actionAgregarActividad","actualizarMensajeRegistrar","connect","PopUpActividad","Component","constructor","props","opciones","respuesta","modulos","forEach","modulo","objeto","label","nombreModulo","value","idModulo","push","handleSubmit","formValues","actividad","nombre","descripcion","localStorage","getItem","reset","error","state","modal","toggle","bind","setState","prevState","componentWillMount","componentDidUpdate","mensaje","success","rowsPerPage","page","removeItem","window","location","href","render","background","configuracion","botones","fontSize","textTransform","className","paddingTop","ReduxFormSelect","fontFamily","fondoBotonCancelar","customStyles","option","provided","control","styles","backgroundColor","singleValue","opacity","isDisabled","transition","input","options","meta","touched","onChange","onBlur","mapStateToProps","act","modulosActividades","mensajeRegistrar","conf","formulario","form"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n\r\nimport Select from 'react-select';\r\nimport Button from '@material-ui/core/Button';\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { generarInput, generarArea } from '../../utilitario/GenerarInputs.js'\r\nimport { seleccione, validacionCuarentaCaracteres, validacionDoscientosCaracteres, requerido } from '../../utilitario/validacionCampos.js';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport SaveAltIcon from '@material-ui/icons/SaveAlt';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nimport { actionConsultarModulos, actionConsultarActividades,actionConsultarCantidadActividades, actionAgregarActividad, actualizarMensajeRegistrar } from '../../actions/actionActividad.js'\r\nimport { connect } from 'react-redux';\r\n\r\nclass PopUpActividad extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            modal: false\r\n        };\r\n        this.toggle = this.toggle.bind(this);\r\n    }\r\n\r\n    toggle() {\r\n        this.setState(prevState => ({\r\n            modal: !prevState.modal\r\n        }));\r\n        this.props.reset();\r\n    }\r\n\r\n    componentWillMount() {\r\n        this.props.actionConsultarModulos(localStorage.getItem('Token'));\r\n\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        switch (this.props.mensaje) {\r\n            case 'actividad registrada':\r\n                NotificationManager.success('Actividad registrada correctamente');\r\n                this.props.actionConsultarActividades(localStorage.getItem('Token'), this.state.rowsPerPage, this.state.page);\r\n                this.props.actionConsultarCantidadActividades(localStorage.getItem('Token'));\r\n                this.props.actualizarMensajeRegistrar('');\r\n                break;\r\n            case 'Sin permiso':\r\n                NotificationManager.error('No tiene permisos sucifientes para registrar una actividad');\r\n                this.props.actualizarMensajeRegistrar('');\r\n                break;\r\n            case 'La actividad ya se encuentra registrada':\r\n                NotificationManager.error('La actividad se encuentra registrada intente de nuevo con otro nombre');\r\n                this.props.actualizarMensajeRegistrar('');\r\n                break;\r\n            case 'El modulo no se encuentra registrado':\r\n                NotificationManager.error('El modulo seleccionado no se encuentra registrado');\r\n                this.props.actualizarMensajeRegistrar('');\r\n                break;\r\n            case 'Ocurrio un error en el servidor':\r\n                NotificationManager.error('Ocurrio un error en el servidor');\r\n                break;\r\n            case 'Servidor fuera de servicio temporalmente':\r\n                NotificationManager.error('Servidor fuera de servicio temporalmente');\r\n                break;\r\n            case 'Token requerido':\r\n                localStorage.removeItem('Token');\r\n                window.location.href = \"/\";\r\n                break;\r\n            case 'token vencido':\r\n                localStorage.removeItem('Token');\r\n                window.location.href = \"/\";\r\n                break;\r\n            case 'token no registrado':\r\n                localStorage.removeItem('Token');\r\n                window.location.href = \"/\";\r\n                break;\r\n            case 'token incorrecto':\r\n                localStorage.removeItem('Token');\r\n                window.location.href = \"/\";\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n    opciones = () => {\r\n        let respuesta = [];\r\n        this.props.modulos.forEach(\r\n            modulo => {\r\n                let objeto = {\r\n                    label: modulo.nombreModulo,\r\n                    value: modulo.idModulo,\r\n                }\r\n                respuesta.push(objeto);\r\n            }\r\n        )\r\n        return respuesta;\r\n    }\r\n\r\n    handleSubmit = formValues => {\r\n        try {\r\n            let actividad = {\r\n                'nombre': formValues.nombre,\r\n                'descripcionActividad': formValues.descripcion,\r\n                'idModulo': formValues.modulo.value,\r\n                'moduloActividad': formValues.modulo.label,\r\n                'estado': 'Activo'\r\n            };\r\n            this.props.actionAgregarActividad(actividad, localStorage.getItem('Token'));\r\n            this.props.reset();\r\n        } catch (error) {\r\n            NotificationManager.error('Ingrese todos los datos');\r\n        }\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <Button style={{ background: this.props.configuracion.botones, fontSize: \"14px\", textTransform: \"none\" }} startIcon={<AddIcon />} className=\"btn btn-dark\" variant=\"contained\" onClick={this.toggle}>Registrar actividad</Button>\r\n                <Modal isOpen={this.state.modal}\r\n                    toggle={this.toggle}\r\n                    className={this.props.className}\r\n                    size=\"col-md-6\"\r\n                >\r\n                    <ModalHeader toggle={this.toggle} className=\"center\">Crear actividad</ModalHeader>\r\n                    <ModalBody>\r\n                        <form onSubmit={this.props.handleSubmit(this.handleSubmit)}>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-sm-12\">\r\n                                    <Field name=\"nombre\" validate={[requerido, validacionCuarentaCaracteres]} component={generarInput} label=\"Nombre\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\">\r\n                                <div className=\"col-sm-12\">\r\n                                    <Field name=\"descripcion\" component={generarArea} filas={4} validate={[requerido, validacionDoscientosCaracteres]} label=\"Descripcion\" />\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"row\" style={{ paddingTop: \"9px\" }}>\r\n                                <div className=\"col-sm-12\">\r\n                                    <Field name=\"modulo\" validate={[seleccione]} component={ReduxFormSelect} options={this.opciones()} />\r\n                                </div>\r\n                            </div>\r\n                            <ModalFooter>\r\n                                <Button style={{ background: this.props.configuracion.botones, fontSize: \"13px\", fontFamily: \"sans-serif\", textTransform: \"none\" }} className=\"btn btn-dark\" variant=\"contained\" startIcon={<SaveAltIcon />} type=\"submit\">Registrar</Button>{''}\r\n                                <Button style={fondoBotonCancelar} className=\"btn btn-dark\" variant=\"contained\" startIcon={<CancelIcon />} onClick={this.toggle}>Cancelar</Button>\r\n                            </ModalFooter>\r\n                        </form>\r\n                    </ModalBody>\r\n                </Modal>\r\n                <NotificationContainer />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport const ReduxFormSelect = props => {\r\n    const customStyles = {\r\n        option: (provided, state) => ({\r\n            ...provided,\r\n            fontSize: 13\r\n        }),\r\n        control: styles => ({ ...styles, backgroundColor: 'white', fontSize: 13, fontFamily: 'sans-serif' }),\r\n        singleValue: (provided, state) => {\r\n            const opacity = state.isDisabled ? 0.5 : 1;\r\n            const transition = 'opacity 300ms';\r\n            return { ...provided, opacity, transition };\r\n        }\r\n    }\r\n    const { input, options } = props;\r\n    const { touched, error } = props.meta;\r\n    return (\r\n        <>\r\n            <Select\r\n                {...input}\r\n\r\n                styles={customStyles}\r\n                isSearchable={false}\r\n                placeholder='Seleccione un modulo'\r\n                onChange={value => input.onChange(value)}\r\n                onBlur={() => input.onBlur(input.value)}\r\n                noOptionsMessage={() => 'Aun no hay ningun modulo registrado'}\r\n                options={options}\r\n            />\r\n            {touched && ((error && <span className=\"text-danger form-group\" style={{ fontSize: '12px', fontFamily: 'sans-serif' }}>{error}</span>))}\r\n        </>\r\n    )\r\n}\r\nconst fondoBotonCancelar = {\r\n    background: \"gray\",\r\n    fontSize: \"13px\",\r\n    fontFamily: \"sans-serif\",\r\n    textTransform: \"none\"\r\n}\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        modulos: state.act.modulosActividades,\r\n        mensaje: state.act.mensajeRegistrar,\r\n        configuracion: state.conf.configuracion\r\n    }\r\n}\r\n\r\nlet formulario = reduxForm({\r\n    form: 'registrarActividad'\r\n})(PopUpActividad)\r\n\r\nexport default withRouter(connect(mapStateToProps, { actionConsultarModulos, actionConsultarActividades,actionConsultarCantidadActividades, actionAgregarActividad, actualizarMensajeRegistrar })(formulario));\r\n\r\n"]},"metadata":{},"sourceType":"module"}