{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nvar _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\SuperAdministrador\\\\componentes\\\\asignar\\\\AsignarActividadUsuario.js\";\nimport React from 'react';\nimport 'react-notifications/lib/notifications.css'; //componentes\n\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\nimport Button from '@material-ui/core/Button';\nimport Select from 'react-select';\nimport { reduxForm, Field } from 'redux-form';\nimport { withRouter } from 'react-router-dom';\nimport { seleccione } from '../../utilitario/validacionCampos.js';\nimport MaterialTable from 'material-table';\nimport Barra from '../general/BarraDirecciones.js';\nimport Divider from '@material-ui/core/Divider';\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\nimport CancelIcon from '@material-ui/icons/Cancel';\nimport Alert from '@material-ui/lab/Alert';\nimport AlertTitle from '@material-ui/lab/AlertTitle';\nimport DoneOutlineIcon from '@material-ui/icons/DoneOutline'; //componentes\n//redux\n\nimport { actionConsultarModulos, actionConsultarActividadesSinAsignar, actionEliminarActividades, actualizarMensajeAsignar, actionAsignarActividades, actionConsultarActividadesUsuario, actionAsignarActividad } from '../../actions/actionsUsuario.js';\nimport { connect } from 'react-redux';\n\nclass AsignarActividadUsuario extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      selectedOption: 0,\n      valor: null,\n      actividadesSeleccionadas: []\n    };\n\n    this.opciones = () => {\n      let respuesta = [];\n      this.props.modulos.forEach(modulo => {\n        let objeto = {\n          label: modulo.nombreModulo,\n          value: modulo.idModulo\n        };\n        respuesta.push(objeto);\n      });\n      return respuesta;\n    };\n\n    this.actividades = () => {\n      let respuesta = [];\n\n      if (this.props.actividadesSinAsignar !== null && this.props.actividadesSinAsignar !== undefined) {\n        this.props.actividadesSinAsignar.forEach(actividad => {\n          let objeto = {\n            label: actividad.nombre,\n            value: actividad.idActividad\n          };\n          respuesta.push(objeto);\n        });\n        return respuesta;\n      } else {\n        return null;\n      }\n    };\n\n    this.retornarValor = () => {\n      return this.state.valor;\n    };\n\n    this.handleChange = selectedOption => {\n      this.setState({\n        selectedOption: selectedOption\n      });\n      this.setState({\n        valor: null\n      });\n      this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, selectedOption.value);\n    };\n\n    this.handleChangeDos = selectedOption => {\n      this.setState({\n        valor: selectedOption\n      });\n    };\n\n    this.onClickCancelar = () => {\n      this.props.history.back();\n    };\n\n    this.handleSubmit = formValues => {\n      if (this.state.valor !== null) {\n        let actividad = {\n          idActividad: this.state.valor.value,\n          nombre: this.state.valor.label\n        };\n        this.setState({\n          valor: null\n        });\n        this.props.actionAsignarActividad(localStorage.getItem('Token'), this.props.cedula, actividad);\n      }\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.cedula === undefined || this.props.cedula.length === 0) {\n      this.props.history.push('/adminUsuario');\n    }\n\n    this.props.actionConsultarModulos(localStorage.getItem('Token'));\n    this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\n  }\n\n  componentDidUpdate() {\n    if (this.props.mensaje !== '') {\n      switch (this.props.mensaje) {\n        case 'Actividad asignada':\n          NotificationManager.success('Actividad asignada');\n          this.setState({\n            valor: null\n          });\n          this.props.actualizarMensajeAsignar('');\n          this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\n          this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, this.state.selectedOption.value);\n          break;\n\n        case 'Actividades eliminadas':\n          NotificationManager.success('Actividades eliminadas');\n          this.props.actualizarMensajeAsignar('');\n          this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\n\n          if (this.state.selectedOption.value !== undefined) {\n            this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, this.state.selectedOption.value);\n          }\n\n          break;\n\n        case 'No se encontraron datos de modulos':\n          NotificationManager.success('No se encontraron datos de modulos');\n          this.props.actualizarMensajeAsignar('');\n          break;\n\n        case 'No se encontraron datos del usuario':\n          NotificationManager.success('No se encontraron actividades asociadas al usuario');\n          this.props.actualizarMensajeAsignar('');\n          break;\n\n        case 'Ocurrio un error en el servidor':\n          NotificationManager.success('Ocurrio un error en el servidor');\n          this.props.actualizarMensajeAsignar('');\n          break;\n\n        case 'Servidor fuera de servicio temporalmente':\n          NotificationManager.success('Servidor fuera de servicio temporalmente');\n          this.props.actualizarMensajeAsignar('');\n          break;\n\n        case 'Ocurrio un error al momento de asignar actividad al usuario':\n          NotificationManager.success('Ocurrio un error al momento de asignar actividad al usuario');\n          this.props.actualizarMensajeAsignar('');\n          break;\n\n        case 'Token requerido':\n          localStorage.removeItem('Token');\n          window.location.href = \"/\";\n          break;\n\n        case 'token vencido':\n          localStorage.removeItem('Token');\n          window.location.href = \"/\";\n          break;\n\n        case 'token no registrado':\n          localStorage.removeItem('Token');\n          window.location.href = \"/\";\n          break;\n\n        case 'token incorrecto':\n          localStorage.removeItem('Token');\n          window.location.href = \"/\";\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n\n  render() {\n    return React.createElement(React.Fragment, null, React.createElement(\"div\", {\n      className: \"text-left titulo\",\n      style: estiloLetrero,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 174\n      },\n      __self: this\n    }, React.createElement(\"h4\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 175\n      },\n      __self: this\n    }, \"Asignar actividad a usuario\")), React.createElement(Barra, {\n      texto: \"Inicio > Administracion de usuarios > Asignaci\\xF3n de actividad a usuario\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"container\",\n      style: {\n        paddingTop: \"7px\",\n        paddingRight: \"44px\",\n        paddingLeft: \"40px\",\n        paddingBottom: \"20px\",\n        margin: \"0px 0px 32px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 178\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container shadow\",\n      style: {\n        background: \"white\",\n        paddingTop: \"37px\",\n        paddingRight: \"31px\",\n        paddingLeft: \"31px\",\n        paddingBottom: \"21px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 187\n      },\n      __self: this\n    }, this.props.habilitado ? React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 196\n      },\n      __self: this\n    }, React.createElement(Alert, {\n      severity: \"error\",\n      variant: \"outlined\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }, React.createElement(AlertTitle, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 198\n      },\n      __self: this\n    }, \"Sin permiso\"), \"No tiene permisos suficientes para administrar las actividades de los usuarios\"), React.createElement(\"div\", {\n      style: {\n        padding: \"25px 44px 25px 395px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 201\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: this.props.configuracion.botones,\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      onClick: this.onClickCancelar,\n      startIcon: React.createElement(DoneOutlineIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 202\n        },\n        __self: this\n      }),\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 202\n      },\n      __self: this\n    }, \"Aceptar\"), '')) : React.createElement(React.Fragment, null, React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.handleSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 206\n      },\n      __self: this\n    }, React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 209\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"modulo\",\n      validate: [seleccione],\n      onChange: this.handleChange,\n      component: ReduxFormSelect,\n      options: this.opciones(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"actividad\",\n      validate: [seleccione],\n      valor: this.retornarValor(),\n      onChange: this.handleChangeDos,\n      component: ReduxFormSelectDos,\n      options: this.actividades(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 213\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 216\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 217\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6\",\n      style: {\n        paddingLeft: \"350px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 219\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: this.props.configuracion.botones,\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      type: \"submit\",\n      variant: \"contained\",\n      startIcon: React.createElement(AddCircleOutlineIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 220\n      },\n      __self: this\n    }, \"A\\xF1adir\")), React.createElement(\"div\", {\n      className: \"col-md-6\",\n      style: {\n        paddingLeft: \"39px\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 228\n      },\n      __self: this\n    }, React.createElement(Button, {\n      type: \"submit\",\n      variant: \"contained\",\n      className: \"btn btn-dark\",\n      style: fondoBotonCancelar,\n      onClick: this.onClickCancelar,\n      startIcon: React.createElement(CancelIcon, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235\n        },\n        __self: this\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 229\n      },\n      __self: this\n    }, \"Salir\"))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 239\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 240\n      },\n      __self: this\n    }), React.createElement(Divider, {\n      variant: \"middle\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 241\n      },\n      __self: this\n    }), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 242\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 244\n      },\n      __self: this\n    }, React.createElement(MaterialTable, {\n      title: \"Actividades actualmente asignadas al usuario\",\n      localization: {\n        header: {\n          actions: ' '\n        },\n        pagination: {\n          nextTooltip: 'Siguiente ',\n          previousTooltip: 'Anterior',\n          labelDisplayedRows: '{from}-{to} de {count}',\n          lastTooltip: 'Ultima pagina',\n          firstTooltip: 'Primera pagina',\n          labelRowsSelect: 'Registros',\n          firstAriaLabel: 'oooo'\n        },\n        body: {\n          emptyDataSourceMessage: 'Ningun registro de actividad encontrado'\n        },\n        toolbar: {\n          searchTooltip: 'Buscar',\n          searchPlaceholder: 'Buscar',\n          nRowsSelected: '{0} actividades seleccionadas'\n        }\n      },\n      columns: [{\n        title: 'Nombre de la actividad',\n        field: 'nombre',\n        headerStyle: estiloCabecera,\n        cellStyle: estiloFila\n      }],\n      data: this.props.actividades,\n      options: {\n        search: true,\n        rowStyle: estiloFila,\n        selection: true\n      },\n      onSelectionChange: rows => {\n        this.setState({\n          actividadesSeleccionadas: rows\n        });\n      },\n      actions: [{\n        tooltip: 'Eliminar actividades seleccionadas',\n        icon: 'delete',\n        onClick: (evt, data) => this.props.actionEliminarActividades(this.state.actividadesSeleccionadas, localStorage.getItem('Token'), this.props.cedula)\n      }],\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 245\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 292\n      },\n      __self: this\n    }))), React.createElement(NotificationContainer, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 295\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport const ReduxFormSelect = props => {\n  const input = props.input,\n        options = props.options;\n  const _props$meta = props.meta,\n        touched = _props$meta.touched,\n        error = _props$meta.error;\n  return React.createElement(React.Fragment, null, React.createElement(Select, Object.assign({}, input, {\n    styles: customStyles,\n    maxMenuHeight: 185,\n    isSearchable: true,\n    placeholder: \"Seleccione un modulo\",\n    onChange: value => input.onChange(value),\n    onBlur: () => input.onBlur(input.value),\n    noOptionsMessage: () => 'Aun no hay ningun modulo registrado',\n    options: options,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 307\n    },\n    __self: this\n  })), touched && error && React.createElement(\"span\", {\n    className: \"text-danger letra form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 318\n    },\n    __self: this\n  }, error));\n};\nexport const ReduxFormSelectDos = props => {\n  const input = props.input,\n        options = props.options;\n  const _props$meta2 = props.meta,\n        touched = _props$meta2.touched,\n        error = _props$meta2.error;\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327\n    },\n    __self: this\n  }, React.createElement(Select, Object.assign({}, input, {\n    styles: customStyles,\n    maxMenuHeight: 185,\n    isSearchable: true,\n    value: props.valor,\n    placeholder: \"Seleccione una actividad\",\n    onChange: value => input.onChange(value),\n    onBlur: () => input.onBlur(input.value),\n    options: options,\n    noOptionsMessage: () => 'No hay ninguna actividad que mostrar',\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 328\n    },\n    __self: this\n  })), touched && error && React.createElement(\"span\", {\n    className: \"text-danger letra form-group\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 340\n    },\n    __self: this\n  }, error));\n};\nconst customStyles = {\n  option: (provided, state) => _objectSpread({}, provided, {\n    fontSize: 13\n  }),\n  control: styles => _objectSpread({}, styles, {\n    backgroundColor: 'white',\n    fontSize: 13,\n    fontFamily: 'sans-serif'\n  }),\n  singleValue: (provided, state) => {\n    const opacity = state.isDisabled ? 0.5 : 1;\n    const transition = 'opacity 300ms';\n    return _objectSpread({}, provided, {\n      opacity,\n      transition\n    });\n  }\n};\nconst estiloCabecera = {\n  fontSize: '14px',\n  fontFamily: 'sans-serif',\n  padding: '8px',\n  background: '#e7ecf1'\n};\nconst estiloFila = {\n  fontSize: '13px',\n  fontFamily: 'sans-serif',\n  padding: '8px'\n};\nconst fondoBotonCancelar = {\n  background: \"gray\",\n  fontSize: \"14px\",\n  fontFamily: \"sans-serif\",\n  textTransform: \"none\"\n};\nconst estiloLetrero = {\n  paddingTop: \"20px\",\n  paddingRight: \"12px\",\n  paddingLeft: \"40px\",\n  paddingBottom: \"1px\"\n};\n\nfunction mapStateToProps(state) {\n  return {\n    modulos: state.user.modulosAsignar,\n    mensaje: state.user.mensajeAsignar,\n    habilitado: state.user.estadoAsignar,\n    cedula: state.user.cedula,\n    actividades: state.user.actividadesUsuario,\n    actividadesSinAsignar: state.user.actividadesSinAsignar,\n    configuracion: state.conf.configuracion\n  };\n}\n\nlet asignarActividadUsuario = reduxForm({\n  form: 'asignarActividadUsuario'\n})(AsignarActividadUsuario);\nexport default withRouter(connect(mapStateToProps, {\n  actionConsultarModulos,\n  actionEliminarActividades,\n  actionConsultarActividadesSinAsignar,\n  actualizarMensajeAsignar,\n  actionAsignarActividad,\n  actionAsignarActividades,\n  actionConsultarActividadesUsuario\n})(asignarActividadUsuario));","map":{"version":3,"sources":["C:/Users/jeiso/Desktop/proyectosESCOM/frontend/ESCOM-view/src/SuperAdministrador/componentes/asignar/AsignarActividadUsuario.js"],"names":["React","NotificationContainer","NotificationManager","Button","Select","reduxForm","Field","withRouter","seleccione","MaterialTable","Barra","Divider","AddCircleOutlineIcon","CancelIcon","Alert","AlertTitle","DoneOutlineIcon","actionConsultarModulos","actionConsultarActividadesSinAsignar","actionEliminarActividades","actualizarMensajeAsignar","actionAsignarActividades","actionConsultarActividadesUsuario","actionAsignarActividad","connect","AsignarActividadUsuario","Component","state","selectedOption","valor","actividadesSeleccionadas","opciones","respuesta","props","modulos","forEach","modulo","objeto","label","nombreModulo","value","idModulo","push","actividades","actividadesSinAsignar","undefined","actividad","nombre","idActividad","retornarValor","handleChange","setState","localStorage","getItem","cedula","handleChangeDos","onClickCancelar","history","back","handleSubmit","formValues","componentDidMount","length","componentDidUpdate","mensaje","success","removeItem","window","location","href","render","estiloLetrero","paddingTop","paddingRight","paddingLeft","paddingBottom","margin","background","habilitado","padding","configuracion","botones","fontSize","fontFamily","textTransform","ReduxFormSelect","ReduxFormSelectDos","fondoBotonCancelar","header","actions","pagination","nextTooltip","previousTooltip","labelDisplayedRows","lastTooltip","firstTooltip","labelRowsSelect","firstAriaLabel","body","emptyDataSourceMessage","toolbar","searchTooltip","searchPlaceholder","nRowsSelected","title","field","headerStyle","estiloCabecera","cellStyle","estiloFila","search","rowStyle","selection","rows","tooltip","icon","onClick","evt","data","input","options","meta","touched","error","customStyles","onChange","onBlur","option","provided","control","styles","backgroundColor","singleValue","opacity","isDisabled","transition","mapStateToProps","user","modulosAsignar","mensajeAsignar","estadoAsignar","actividadesUsuario","conf","asignarActividadUsuario","form"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport 'react-notifications/lib/notifications.css';\r\n\r\n//componentes\r\nimport { NotificationContainer, NotificationManager } from 'react-notifications';\r\nimport Button from '@material-ui/core/Button';\r\nimport Select from 'react-select'\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { seleccione } from '../../utilitario/validacionCampos.js';\r\nimport MaterialTable from 'material-table';\r\nimport Barra from '../general/BarraDirecciones.js';\r\n\r\nimport Divider from '@material-ui/core/Divider';\r\nimport AddCircleOutlineIcon from '@material-ui/icons/AddCircleOutline';\r\nimport CancelIcon from '@material-ui/icons/Cancel';\r\n\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport AlertTitle from '@material-ui/lab/AlertTitle';\r\nimport DoneOutlineIcon from '@material-ui/icons/DoneOutline';\r\n\r\n//componentes\r\n\r\n//redux\r\nimport { actionConsultarModulos, actionConsultarActividadesSinAsignar, actionEliminarActividades, actualizarMensajeAsignar, actionAsignarActividades, actionConsultarActividadesUsuario, actionAsignarActividad } from '../../actions/actionsUsuario.js'\r\nimport { connect } from 'react-redux';\r\n\r\n\r\nclass AsignarActividadUsuario extends React.Component {\r\n\r\n    state = {\r\n        selectedOption: 0,\r\n        valor: null,\r\n        actividadesSeleccionadas: []\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.cedula === undefined || this.props.cedula.length === 0) {\r\n            this.props.history.push('/adminUsuario');\r\n        }\r\n        this.props.actionConsultarModulos(localStorage.getItem('Token'));\r\n        this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\r\n    }\r\n    componentDidUpdate() {\r\n        if (this.props.mensaje !== '') {\r\n            switch (this.props.mensaje) {\r\n                case 'Actividad asignada':\r\n                    NotificationManager.success('Actividad asignada');\r\n                    this.setState({ valor: null });\r\n                    this.props.actualizarMensajeAsignar('');\r\n                    this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\r\n                    this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, this.state.selectedOption.value);\r\n                    break;\r\n                case 'Actividades eliminadas':\r\n                    NotificationManager.success('Actividades eliminadas');\r\n                    this.props.actualizarMensajeAsignar('');\r\n                    this.props.actionConsultarActividadesUsuario(this.props.cedula, localStorage.getItem('Token'));\r\n                    if (this.state.selectedOption.value !== undefined) {\r\n                        this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, this.state.selectedOption.value);\r\n                    }\r\n                    break;\r\n                case 'No se encontraron datos de modulos':\r\n                    NotificationManager.success('No se encontraron datos de modulos');\r\n                    this.props.actualizarMensajeAsignar('');\r\n\r\n                    break;\r\n                case 'No se encontraron datos del usuario':\r\n                    NotificationManager.success('No se encontraron actividades asociadas al usuario');\r\n                    this.props.actualizarMensajeAsignar('');\r\n\r\n                    break;\r\n                case 'Ocurrio un error en el servidor':\r\n                    NotificationManager.success('Ocurrio un error en el servidor');\r\n                    this.props.actualizarMensajeAsignar('');\r\n\r\n                    break;\r\n                case 'Servidor fuera de servicio temporalmente':\r\n                    NotificationManager.success('Servidor fuera de servicio temporalmente');\r\n                    this.props.actualizarMensajeAsignar('');\r\n\r\n                    break;\r\n                case 'Ocurrio un error al momento de asignar actividad al usuario':\r\n                    NotificationManager.success('Ocurrio un error al momento de asignar actividad al usuario');\r\n                    this.props.actualizarMensajeAsignar('');\r\n\r\n                    break;\r\n                case 'Token requerido':\r\n                    localStorage.removeItem('Token');\r\n                    window.location.href = \"/\";\r\n                    break;\r\n                case 'token vencido':\r\n                    localStorage.removeItem('Token');\r\n                    window.location.href = \"/\";\r\n                    break;\r\n                case 'token no registrado':\r\n                    localStorage.removeItem('Token');\r\n                    window.location.href = \"/\";\r\n                    break;\r\n                case 'token incorrecto':\r\n                    localStorage.removeItem('Token');\r\n                    window.location.href = \"/\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    opciones = () => {\r\n        let respuesta = [];\r\n        this.props.modulos.forEach(\r\n            modulo => {\r\n                let objeto = {\r\n                    label: modulo.nombreModulo,\r\n                    value: modulo.idModulo,\r\n                }\r\n                respuesta.push(objeto);\r\n            }\r\n        )\r\n        return respuesta;\r\n    }\r\n\r\n    actividades = () => {\r\n        let respuesta = [];\r\n        if (this.props.actividadesSinAsignar !== null && this.props.actividadesSinAsignar !== undefined) {\r\n            this.props.actividadesSinAsignar.forEach(\r\n                actividad => {\r\n                    let objeto = {\r\n                        label: actividad.nombre,\r\n                        value: actividad.idActividad,\r\n                    }\r\n                    respuesta.push(objeto);\r\n                }\r\n            )\r\n            return respuesta;\r\n        } else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    retornarValor = () => {\r\n        return this.state.valor;\r\n    }\r\n\r\n    handleChange = selectedOption => {\r\n        this.setState({ selectedOption: selectedOption });\r\n        this.setState({ valor: null });\r\n        this.props.actionConsultarActividadesSinAsignar(localStorage.getItem('Token'), this.props.cedula, selectedOption.value);\r\n    };\r\n\r\n    handleChangeDos = selectedOption => {\r\n        this.setState({ valor: selectedOption });\r\n    };\r\n\r\n    onClickCancelar = () => {\r\n        this.props.history.back();\r\n    }\r\n\r\n    handleSubmit = formValues => {\r\n        if (this.state.valor !== null) {\r\n            let actividad = {\r\n                idActividad: this.state.valor.value,\r\n                nombre: this.state.valor.label\r\n            }\r\n            this.setState({ valor: null });\r\n            this.props.actionAsignarActividad(localStorage.getItem('Token'), this.props.cedula, actividad);\r\n        }\r\n    }\r\n    render() {\r\n        return (\r\n            <>\r\n                <div className=\"text-left titulo\" style={estiloLetrero}>\r\n                    <h4>Asignar actividad a usuario</h4>\r\n                </div>\r\n                <Barra texto=\"Inicio > Administracion de usuarios > Asignación de actividad a usuario\" />\r\n                <div className=\"container\" style={{\r\n                    paddingTop: \"7px\",\r\n                    paddingRight: \"44px\",\r\n                    paddingLeft: \"40px\",\r\n                    paddingBottom: \"20px\",\r\n                    margin: \"0px 0px 32px\"\r\n\r\n                }}>\r\n\r\n                    <div className=\"container shadow\" style={\r\n                        {\r\n                            background: \"white\",\r\n                            paddingTop: \"37px\",\r\n                            paddingRight: \"31px\",\r\n                            paddingLeft: \"31px\",\r\n                            paddingBottom: \"21px\"\r\n                        }} >\r\n                        {\r\n                            this.props.habilitado ? <div className=\"col-sm-12\">\r\n                                <Alert severity=\"error\" variant=\"outlined\">\r\n                                    <AlertTitle>Sin permiso</AlertTitle>\r\n                                    No tiene permisos suficientes para administrar las actividades de los usuarios\r\n                                </Alert>\r\n                                <div style={{ padding: \"25px 44px 25px 395px\" }}>\r\n                                    <Button style={{ background: this.props.configuracion.botones, fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }} className=\"btn btn-dark\" variant=\"contained\" onClick={this.onClickCancelar} startIcon={<DoneOutlineIcon />} type=\"submit\">Aceptar</Button>{''}\r\n                                </div>\r\n                            </div> :\r\n                                <>\r\n                                    <form onSubmit={this.props.handleSubmit(this.handleSubmit)}>\r\n                                        <br />\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-md-6\">\r\n                                                <Field name=\"modulo\" validate={[seleccione]} onChange={this.handleChange} component={ReduxFormSelect} options={this.opciones()} />\r\n                                            </div>\r\n                                            <div className=\"col-md-6\">\r\n                                                <Field name=\"actividad\" validate={[seleccione]} valor={this.retornarValor()} onChange={this.handleChangeDos} component={ReduxFormSelectDos} options={this.actividades()} />\r\n                                            </div>\r\n                                        </div>\r\n                                        <br />\r\n                                        <br />\r\n                                        <div className=\"row\">\r\n                                            <div className=\"col-md-6\" style={{ paddingLeft: \"350px\" }}>\r\n                                                <Button\r\n                                                    style={{ background: this.props.configuracion.botones, fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                    className=\"btn btn-dark\"\r\n                                                    type=\"submit\"\r\n                                                    variant=\"contained\"\r\n                                                    startIcon={<AddCircleOutlineIcon />}\r\n                                                >Añadir</Button>\r\n                                            </div>\r\n                                            <div className=\"col-md-6\" style={{ paddingLeft: \"39px\" }}>\r\n                                                <Button\r\n                                                    type=\"submit\"\r\n                                                    variant=\"contained\"\r\n                                                    className=\"btn btn-dark\"\r\n                                                    style={fondoBotonCancelar}\r\n                                                    onClick={this.onClickCancelar}\r\n                                                    startIcon={<CancelIcon />}\r\n                                                >Salir</Button>\r\n                                            </div>\r\n                                        </div>\r\n                                        <br />\r\n                                        <br />\r\n                                        <Divider variant=\"middle\" />\r\n                                        <br />\r\n                                    </form>\r\n                                    <div>\r\n                                        <MaterialTable\r\n                                            title=\"Actividades actualmente asignadas al usuario\"\r\n                                            localization={{\r\n                                                header: {\r\n                                                    actions: ' '\r\n                                                },\r\n                                                pagination: {\r\n                                                    nextTooltip: 'Siguiente ',\r\n                                                    previousTooltip: 'Anterior',\r\n                                                    labelDisplayedRows: '{from}-{to} de {count}',\r\n                                                    lastTooltip: 'Ultima pagina',\r\n                                                    firstTooltip: 'Primera pagina',\r\n                                                    labelRowsSelect: 'Registros',\r\n                                                    firstAriaLabel: 'oooo'\r\n                                                },\r\n                                                body: {\r\n                                                    emptyDataSourceMessage: 'Ningun registro de actividad encontrado'\r\n                                                },\r\n                                                toolbar: {\r\n                                                    searchTooltip: 'Buscar',\r\n                                                    searchPlaceholder: 'Buscar',\r\n                                                    nRowsSelected: '{0} actividades seleccionadas',\r\n                                                }\r\n                                            }}\r\n                                            columns={[\r\n                                                { title: 'Nombre de la actividad', field: 'nombre', headerStyle: estiloCabecera, cellStyle: estiloFila }\r\n                                            ]}\r\n                                            data={this.props.actividades}\r\n                                            options={{\r\n                                                search: true,\r\n                                                rowStyle: estiloFila,\r\n                                                selection: true\r\n                                            }}\r\n                                            onSelectionChange={(rows) => {\r\n                                                this.setState({ actividadesSeleccionadas: rows });\r\n                                            }}\r\n                                            actions={[\r\n                                                {\r\n                                                    tooltip: 'Eliminar actividades seleccionadas',\r\n                                                    icon: 'delete',\r\n                                                    onClick: (evt, data) => this.props.actionEliminarActividades(this.state.actividadesSeleccionadas, localStorage.getItem('Token'), this.props.cedula)\r\n                                                }\r\n                                            ]}\r\n                                        />\r\n                                    </div>\r\n                                </>\r\n                        }\r\n                        <br />\r\n                    </div>\r\n                </div>\r\n                <NotificationContainer />\r\n            </>\r\n\r\n        )\r\n    }\r\n}\r\n\r\nexport const ReduxFormSelect = props => {\r\n    const { input, options } = props;\r\n    const { touched, error } = props.meta;\r\n    return (\r\n        <>\r\n            <Select\r\n                {...input}\r\n                styles={customStyles}\r\n                maxMenuHeight={185}\r\n                isSearchable={true}\r\n                placeholder='Seleccione un modulo'\r\n                onChange={value => input.onChange(value)}\r\n                onBlur={() => input.onBlur(input.value)}\r\n                noOptionsMessage={() => 'Aun no hay ningun modulo registrado'}\r\n                options={options}\r\n            />\r\n            {touched && ((error && <span className=\"text-danger letra form-group\">{error}</span>))}\r\n        </>\r\n    )\r\n}\r\n\r\nexport const ReduxFormSelectDos = props => {\r\n    const { input, options } = props;\r\n    const { touched, error } = props.meta;\r\n    return (\r\n        <div>\r\n            <Select\r\n                {...input}\r\n                styles={customStyles}\r\n                maxMenuHeight={185}\r\n                isSearchable={true}\r\n                value={props.valor}\r\n                placeholder='Seleccione una actividad'\r\n                onChange={value => input.onChange(value)}\r\n                onBlur={() => input.onBlur(input.value)}\r\n                options={options}\r\n                noOptionsMessage={() => 'No hay ninguna actividad que mostrar'}\r\n            />\r\n            {touched && ((error && <span className=\"text-danger letra form-group\">{error}</span>))}\r\n        </div>\r\n    )\r\n}\r\n\r\nconst customStyles = {\r\n    option: (provided, state) => ({\r\n        ...provided,\r\n        fontSize: 13\r\n    }),\r\n    control: styles => ({ ...styles, backgroundColor: 'white', fontSize: 13, fontFamily: 'sans-serif' }),\r\n    singleValue: (provided, state) => {\r\n        const opacity = state.isDisabled ? 0.5 : 1;\r\n        const transition = 'opacity 300ms';\r\n        return { ...provided, opacity, transition };\r\n    }\r\n}\r\n\r\nconst estiloCabecera = {\r\n    fontSize: '14px',\r\n    fontFamily: 'sans-serif',\r\n    padding: '8px',\r\n    background: '#e7ecf1'\r\n\r\n}\r\n\r\nconst estiloFila = {\r\n    fontSize: '13px',\r\n    fontFamily: 'sans-serif',\r\n    padding: '8px',\r\n}\r\n\r\nconst fondoBotonCancelar = {\r\n    background: \"gray\",\r\n    fontSize: \"14px\",\r\n    fontFamily: \"sans-serif\",\r\n    textTransform: \"none\"\r\n}\r\n\r\n\r\nconst estiloLetrero = {\r\n    paddingTop: \"20px\",\r\n    paddingRight: \"12px\",\r\n    paddingLeft: \"40px\",\r\n    paddingBottom: \"1px\"\r\n}\r\n\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        modulos: state.user.modulosAsignar,\r\n        mensaje: state.user.mensajeAsignar,\r\n        habilitado: state.user.estadoAsignar,\r\n        cedula: state.user.cedula,\r\n        actividades: state.user.actividadesUsuario,\r\n        actividadesSinAsignar: state.user.actividadesSinAsignar,\r\n        configuracion: state.conf.configuracion\r\n    }\r\n}\r\n\r\nlet asignarActividadUsuario = reduxForm({\r\n    form: 'asignarActividadUsuario'\r\n})(AsignarActividadUsuario)\r\n\r\nexport default withRouter(connect(mapStateToProps, { actionConsultarModulos, actionEliminarActividades, actionConsultarActividadesSinAsignar, actualizarMensajeAsignar, actionAsignarActividad, actionAsignarActividades, actionConsultarActividadesUsuario })(asignarActividadUsuario));\r\n"]},"metadata":{},"sourceType":"module"}