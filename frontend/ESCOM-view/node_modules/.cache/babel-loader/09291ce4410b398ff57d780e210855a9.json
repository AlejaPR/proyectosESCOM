{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\jeiso\\\\Desktop\\\\proyectosESCOM\\\\frontend\\\\ESCOM-view\\\\src\\\\SuperAdministrador\\\\componentes\\\\general\\\\RecuperarContrasena.js\";\nimport React from 'react';\nimport '../../css/menu.css';\nimport '../../css/registro.css';\nimport Button from '@material-ui/core/Button';\nimport { reduxForm, Field } from 'redux-form';\nimport Alert from '@material-ui/lab/Alert';\nimport { generarInputLogin } from '../../utilitario/GenerarInputs.js';\nimport { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena } from '../../actions/actionsUsuario.js';\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\nimport { connect } from 'react-redux';\nimport imagenDefecto from '../../imagenes/defectoLogin.png';\nimport { withRouter } from 'react-router-dom';\nimport RenderPasword from '../../utilitario/GenerarInputs';\nimport { requerido, contrasena } from '../../utilitario/validacionCampos.js';\n\nclass Recuperar extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      habilitado: false,\n      recuperar: false\n    };\n\n    this.handleSubmitForm = values => {\n      if (values.nuevaContrasena !== values.verificacionNueva) {\n        this.props.actualizarMensajeRecuperarContrasena('Las contraseñas no coinciden');\n      } else {\n        debugger;\n        this.props.actionCambiarContrasenaExterna(this.props.correo, values.nuevaContrasena, this.props.match.params.token);\n      }\n    };\n\n    this.onClicKIniciar = event => {\n      event.preventDefault();\n      this.props.historu.push('/');\n    };\n  }\n\n  componentDidMount() {\n    if (this.props.match.params.token === undefined | this.props.match.params.token.length < 130) {\n      this.props.history.push('/');\n    } else {\n      this.props.actionValidarToken(this.props.match.params.token);\n    }\n  }\n\n  componentDidUpdate() {\n    switch (this.props.mensaje) {\n      case 'Correcto':\n        if (!this.state.recuperar) {\n          this.setState({\n            recuperar: true\n          });\n        }\n\n        this.props.actualizarMensajeRecuperarContrasena('');\n        break;\n\n      case 'Contraseña actualizada':\n        break;\n    }\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container-fluid\",\n      style: {\n        background: \"white\"\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 64\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row no-gutter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-8 col-lg-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 67\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"login d-flex align-items-center py-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 68\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"container\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 70\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-md-6 col-lg-10 mx-auto\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71\n      },\n      __self: this\n    }, this.state.recuperar ? React.createElement(React.Fragment, null, React.createElement(Modal, {\n      isOpen: true,\n      toggle: this.toggle,\n      className: this.props.className,\n      style: {\n        maxWidth: '400px',\n        width: '50%',\n        margin: '10px auto'\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(ModalHeader, {\n      toggle: this.toggle,\n      className: \"center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79\n      },\n      __self: this\n    }, \"Cambiar contrase\\xF1a\"), React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: this.props.handleSubmit(this.handleSubmitForm),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"nuevaContrasena\",\n      component: RenderPasword,\n      validate: [requerido, contrasena],\n      label: \"Nueva contrase\\xF1a\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 82\n      },\n      __self: this\n    }), React.createElement(Field, {\n      name: \"verificacionNueva\",\n      component: RenderPasword,\n      validate: [requerido, contrasena],\n      label: \"Confirmar nueva contrase\\xF1a\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83\n      },\n      __self: this\n    }), React.createElement(ModalFooter, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 85\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"mensaje\",\n      component: generarMensaje,\n      label: this.props.mensaje,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 88\n      },\n      __self: this\n    }))), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-5\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: 'gray',\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      onClick: this.onClicKIniciar,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Iniciar sesion\")), React.createElement(\"div\", {\n      className: \"col-sm-7\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: '#0E3D38',\n        fontSize: \"14px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, \"Cambiar contrase\\xF1a\"))))))))) : React.createElement(React.Fragment, null, React.createElement(Modal, {\n      isOpen: true,\n      toggle: this.toggle,\n      className: this.props.className,\n      size: \"col-md-6\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(ModalBody, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-12 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, React.createElement(Field, {\n      name: \"mensaje\",\n      component: generarMensaje,\n      label: this.props.mensaje,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 127\n      },\n      __self: this\n    }))), React.createElement(\"br\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }), React.createElement(\"div\", {\n      className: \"row\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 131\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"col-sm-6 center\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, React.createElement(Button, {\n      style: {\n        background: '#0E3D38',\n        fontSize: \"15px\",\n        fontFamily: \"sans-serif\",\n        textTransform: \"none\"\n      },\n      className: \"btn btn-dark\",\n      variant: \"contained\",\n      disabled: this.state.habilitado,\n      type: \"submit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 133\n      },\n      __self: this\n    }, \"Enviar\"))))))))))))));\n  }\n\n}\n\nconst generarMensaje = ({\n  input,\n  label,\n  type,\n  meta: {\n    touched,\n    error,\n    warning\n  }\n}) => React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 156\n  },\n  __self: this\n}, React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 157\n  },\n  __self: this\n}, React.createElement(\"br\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 158\n  },\n  __self: this\n}), label === undefined | label === '' ? React.createElement(\"div\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 159\n  },\n  __self: this\n}) : React.createElement(Alert, {\n  draggable: true,\n  severity: \"error\",\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 159\n  },\n  __self: this\n}, label), React.createElement(\"br\", {\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 160\n  },\n  __self: this\n})));\n\nfunction mapStateToProps(state) {\n  return {\n    mensaje: state.user.mensajeContrasenaExterna,\n    correo: state.user.nombreUsuario\n  };\n}\n\nlet formulario = reduxForm({\n  form: 'recuperarContrasena'\n})(Recuperar);\nexport default withRouter(connect(mapStateToProps, {\n  actionValidarToken,\n  actionCambiarContrasenaExterna,\n  actualizarMensajeRecuperarContrasena\n})(formulario));","map":{"version":3,"sources":["C:/Users/jeiso/Desktop/proyectosESCOM/frontend/ESCOM-view/src/SuperAdministrador/componentes/general/RecuperarContrasena.js"],"names":["React","Button","reduxForm","Field","Alert","generarInputLogin","actionValidarToken","actionCambiarContrasenaExterna","actualizarMensajeRecuperarContrasena","Modal","ModalHeader","ModalBody","ModalFooter","connect","imagenDefecto","withRouter","RenderPasword","requerido","contrasena","Recuperar","Component","state","habilitado","recuperar","handleSubmitForm","values","nuevaContrasena","verificacionNueva","props","correo","match","params","token","onClicKIniciar","event","preventDefault","historu","push","componentDidMount","undefined","length","history","componentDidUpdate","mensaje","setState","render","background","toggle","className","maxWidth","width","margin","handleSubmit","generarMensaje","fontSize","fontFamily","textTransform","input","label","type","meta","touched","error","warning","mapStateToProps","user","mensajeContrasenaExterna","nombreUsuario","formulario","form"],"mappings":"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","sourcesContent":["import React from 'react';\r\n\r\nimport '../../css/menu.css'\r\nimport '../../css/registro.css'\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport { reduxForm, Field } from 'redux-form';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { generarInputLogin } from '../../utilitario/GenerarInputs.js';\r\nimport { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena } from '../../actions/actionsUsuario.js'\r\nimport { Modal, ModalHeader, ModalBody, ModalFooter } from 'reactstrap';\r\nimport { connect } from 'react-redux';\r\nimport imagenDefecto from '../../imagenes/defectoLogin.png';\r\nimport { withRouter } from 'react-router-dom';\r\nimport RenderPasword from '../../utilitario/GenerarInputs';\r\nimport { requerido, contrasena } from '../../utilitario/validacionCampos.js';\r\n\r\nclass Recuperar extends React.Component {\r\n\r\n    state = {\r\n        habilitado: false,\r\n        recuperar: false\r\n    }\r\n\r\n\r\n\r\n    componentDidMount() {\r\n        if (this.props.match.params.token === undefined | this.props.match.params.token.length < 130) {\r\n            this.props.history.push('/');\r\n        } else {\r\n            this.props.actionValidarToken(this.props.match.params.token);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        switch (this.props.mensaje) {\r\n            case 'Correcto':\r\n                if (!this.state.recuperar) { this.setState({ recuperar: true }) }\r\n                this.props.actualizarMensajeRecuperarContrasena('');\r\n                break;\r\n            case 'Contraseña actualizada':\r\n                break;\r\n        }\r\n    }\r\n\r\n    handleSubmitForm = values => {\r\n        if (values.nuevaContrasena !== values.verificacionNueva) {\r\n            this.props.actualizarMensajeRecuperarContrasena('Las contraseñas no coinciden');\r\n        } else {\r\n            debugger;\r\n            this.props.actionCambiarContrasenaExterna(this.props.correo, values.nuevaContrasena, this.props.match.params.token);\r\n        }\r\n    }\r\n\r\n    onClicKIniciar=event=>{\r\n        event.preventDefault();\r\n        this.props.historu.push('/');\r\n    }\r\n\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div className=\"container-fluid\" style={{ background: \"white\" }}>\r\n                    <div className=\"row no-gutter\">\r\n\r\n                        <div className=\"col-md-8 col-lg-6\">\r\n                            <div className=\"login d-flex align-items-center py-5\">\r\n                                <div className=\"container\">\r\n                                    <div className=\"row\">\r\n                                        <div className=\"col-md-6 col-lg-10 mx-auto\">\r\n                                            {this.state.recuperar ?\r\n                                                <>\r\n                                                    <Modal isOpen={true}\r\n                                                        toggle={this.toggle}\r\n                                                        className={this.props.className}\r\n                                                        style={{ maxWidth: '400px', width: '50%', margin: '10px auto' }}\r\n                                                    >\r\n                                                        <ModalHeader toggle={this.toggle} className=\"center\">Cambiar contraseña</ModalHeader>\r\n                                                        <ModalBody>\r\n                                                            <form onSubmit={this.props.handleSubmit(this.handleSubmitForm)}>\r\n                                                                <Field name=\"nuevaContrasena\" component={RenderPasword} validate={[requerido, contrasena]} label=\"Nueva contraseña\" />\r\n                                                                <Field name=\"verificacionNueva\" component={RenderPasword} validate={[requerido, contrasena]} label=\"Confirmar nueva contraseña\" />\r\n                                                                <ModalFooter>\r\n                                                                    <div>\r\n                                                                        <div className=\"row\">\r\n                                                                            <div className=\"col-sm-12\">\r\n                                                                                <Field name=\"mensaje\" component={generarMensaje} label={this.props.mensaje} />\r\n                                                                            </div>\r\n                                                                        </div>\r\n                                                                        <div className=\"row\">\r\n                                                                        <div className=\"col-sm-5\">\r\n                                                                                <Button\r\n                                                                                    style={{ background: 'gray', fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                                                    className=\"btn btn-dark\"\r\n                                                                                    variant=\"contained\"\r\n                                                                                    onClick={this.onClicKIniciar}\r\n                                                                                    >\r\n                                                                                    Iniciar sesion\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                    </Button>\r\n                                                                            </div>\r\n                                                                            <div className=\"col-sm-7\">\r\n                                                                                <Button\r\n                                                                                    style={{ background: '#0E3D38', fontSize: \"14px\", fontFamily: \"sans-serif\", textTransform: \"none\" }}\r\n                                                                                    className=\"btn btn-dark\"\r\n                                                                                    variant=\"contained\"\r\n                                                                                    type=\"submit\">\r\n                                                                                    Cambiar contraseña\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t                    </Button>\r\n                                                                            </div>\r\n                                                                        </div>\r\n\r\n                                                                    </div>\r\n                                                                </ModalFooter>\r\n                                                            </form>\r\n                                                        </ModalBody>\r\n                                                    </Modal>\r\n                                                </> :\r\n                                                <>\r\n                                                    <Modal isOpen={true}\r\n                                                        toggle={this.toggle}\r\n                                                        className={this.props.className}\r\n                                                        size=\"col-md-6\">\r\n                                                        <ModalBody>\r\n                                                            <div className=\"row\">\r\n                                                                <div className=\"col-sm-12 center\">\r\n                                                                    <Field name=\"mensaje\" component={generarMensaje} label={this.props.mensaje} />\r\n                                                                </div>\r\n                                                            </div>\r\n                                                            <br />\r\n                                                            <div className=\"row\">\r\n                                                                <div className=\"col-sm-6 center\">\r\n                                                                    <Button style={{ background: '#0E3D38', fontSize: \"15px\", fontFamily: \"sans-serif\", textTransform: \"none\" }} className=\"btn btn-dark\" variant=\"contained\" disabled={this.state.habilitado} type=\"submit\">Enviar</Button>\r\n                                                                </div>\r\n                                                            </div>\r\n                                                        </ModalBody>\r\n                                                    </Modal>\r\n\r\n                                                </>\r\n\r\n                                            }\r\n\r\n                                        </div>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst generarMensaje = ({ input, label, type, meta: { touched, error, warning } }) => (\r\n    <div>\r\n        <div>\r\n            <br />\r\n            {label === undefined | label === '' ? <div></div> : <Alert draggable={true} severity=\"error\">{label}</Alert>}\r\n            <br />\r\n        </div>\r\n    </div>\r\n)\r\n\r\n\r\nfunction mapStateToProps(state) {\r\n    return {\r\n        mensaje: state.user.mensajeContrasenaExterna,\r\n        correo: state.user.nombreUsuario\r\n    }\r\n}\r\n\r\nlet formulario = reduxForm({\r\n    form: 'recuperarContrasena'\r\n})(Recuperar)\r\n\r\n\r\n\r\nexport default withRouter(connect(mapStateToProps, { actionValidarToken, actionCambiarContrasenaExterna, actualizarMensajeRecuperarContrasena })(formulario));\r\n"]},"metadata":{},"sourceType":"module"}